diff --git a/Frontend/GUIDA.md b/Frontend/GUIDA.md
index 07ec3c1..57435e8 100644
--- a/Frontend/GUIDA.md
+++ b/Frontend/GUIDA.md
@@ -322,6 +322,14 @@ Il CSP √® il "perimetro di difesa" dell'app. Non usiamo una configurazione permi
 - Autorizza specificamente lo script inline di inizializzazione tema (`theme-init.js` logic) senza abilitare `unsafe-inline` per tutti gli script, proteggendo l'integrit√† dell'app.
 - Se modifichi lo script inline in `index.html`, devi ricalcolare l'hash e aggiornare questa guida e tutti i file HTML, altrimenti l'app si bloccher√† per violazione di sicurezza.
 
+**üí° Eccezione per lo Sviluppo Locale (Nota Operativa):**
+Durante l'uso di **Live Server** o i **Chrome DevTools**, potresti vedere errori in console che bloccano connessioni a `127.0.0.1` o `ws://...` (usati per il refresh automatico o il debugging). 
+Per silenziare questi errori "rumorosi" durante lo sviluppo, puoi aggiungere temporaneamente l'eccezione locale alla direttiva `connect-src`:
+```text
+connect-src 'self' http://127.0.0.1:* ws://127.0.0.1:* https://*.googleapis.com ...
+```
+‚ö†Ô∏è **ATTENZIONE**: Questa eccezione √® strettamente per uso locale. Prima della messa in produzione o del deploy su Firebase, il CSP deve essere riportato allo standard rigoroso senza riferimenti a `127.0.0.1`.
+
 ### 8.3 Sicurezza Form & Anti-Autofill (Standard V6.1.0 Hardened)
 ### Spiegazione umana:
 I browser moderni e i password manager (Chrome, Safari, 1Password, ecc.) sono estremamente aggressivi e tentano di autocompilare o proporre il salvataggio per qualsiasi campo `type="password"` visibile. In un'app che gestisce le password di account terzi (come App Codici Password), questo causa problemi critici: il browser tenter√† di salvare la password dell'account del cliente, sovrascrivendola a quella di accesso dell'app stessa. Dobbiamo inibire totalmente questo comportamento con un pattern specifico a 4 livelli.
@@ -629,3 +637,49 @@ Sfruttiamo l'autenticazione API nativa Google (`googleapis` + `JWT Client`) usan
 
 ‚úÖ **PROTOCOLLO V5.1 MASTER ‚Äî DOCUMENTAZIONE COMPLETA.**
 Questa guida √® ora il tuo unico manuale operativo. Non deviare dalla via maestra.
+
+---
+
+## 20. MODALIT√Ä OFFLINE E SICUREZZA LOCALE (ROADMAP STRATEGICA)
+
+### 20.1 üéØ Obiettivo
+L‚Äôapp dovr√† permettere la navigazione tra gli account e l‚Äôaccesso ai dati essenziali anche in assenza di connessione internet. Lo scenario d‚Äôuso principale √® il seguente:
+- **Utente senza segnale** che necessita di accedere a un‚Äôinformazione critica (es. PIN Bancomat, codice carta, credenziali di emergenza).
+L‚Äôobiettivo √® rendere l‚Äôutente autonomo anche offline, evitando blocchi operativi in situazioni critiche.
+
+### 20.2 ‚ö†Ô∏è Premessa Importante
+In assenza di connessione:
+- L‚Äôaccesso a username/password di siti web potrebbe non essere immediatamente utile.
+- Tuttavia, codici fisici (**PIN, codici carte, codici emergenza**) possono risultare fondamentali.
+
+√à quindi necessario distinguere tra:
+- **üîπ Credenziali ‚Äúweb‚Äù**
+- **üîπ Dati sensibili di utilizzo fisico** (PIN, codici carta, ecc.) ‚Äî *Priorit√† Offline*
+
+### 20.3 üîê Tema Critico: Sicurezza dei Dati Locali
+Consentire l'accesso offline significa salvare dati sensibili in locale sul dispositivo. Questo introduce rischi significativi in caso di smarrimento, furto o accesso fisico non autorizzato. La modalit√† offline deve quindi essere progettata con un modello **‚Äúzero trust locale‚Äù**.
+
+### 20.4 üîí Linee Guida di Sicurezza Obbligatorie
+
+1. **1Ô∏è‚É£ Cifratura Locale Forte**:
+   - Tutti i dati sensibili devono essere cifrati in locale. Nessun dato leggibile in chiaro nel filesystem.
+   - Utilizzo di chiavi derivate dalla master password o secure enclave del dispositivo.
+2. **2Ô∏è‚É£ Sblocco Biometrico Obbligatorio**:
+   - Accesso ai dati offline consentito solo tramite **Biometria** (FaceID / Fingerprint) o **Master password**. Mai accesso diretto automatico.
+3. **3Ô∏è‚É£ Separazione dei Livelli di Sensibilit√†**:
+   - Possibile evoluzione: Livello base visibile offline, Livello critico (PIN, carte) visibile solo dopo un secondo livello di autenticazione.
+4. **4Ô∏è‚É£ Auto-Lock & Auto-Purge**:
+   - Blocco automatico dopo inattivit√† e cancellazione delle cache temporanee. Nessun dato lasciato in memoria oltre il tempo necessario.
+
+### 20.5 üß† Decisione Architetturale da Prendere
+**Domanda chiave**: Vogliamo che tutti gli account siano disponibili offline o solo quelli marcati come ‚ÄúAccesso Emergenza‚Äù?
+**Possibile soluzione evoluta**:
+- Inserire un Toggle **‚ÄúDisponibile Offline‚Äù** per ogni account.
+- Sincronizzazione cifrata locale solo per gli elementi marcati. Questo riduce drasticamente il rischio.
+
+### 20.6 ‚öñÔ∏è Considerazione Strategica
+Un‚Äôapp che contiene PIN Bancomat, codici carte di credito e password critiche diventa un **‚ÄúSingle Point of Failure‚Äù**. L‚Äôobiettivo non deve essere solo funzionale, ma **ridurre il danno massimo possibile** in caso di compromissione del dispositivo.
+
+### 20.7 üìå Conclusione
+La modalit√† offline √® un‚Äôevoluzione strategica importante, ma deve essere implementata solo con cifratura robusta, autenticazione forte e minimizzazione dei dati salvati. 
+**La sicurezza non pu√≤ essere un‚Äôaggiunta successiva: deve essere parte integrante della progettazione.**
diff --git a/Frontend/public/aggiungi_nuova_azienda.html b/Frontend/public/aggiungi_nuova_azienda.html
index f3da805..24be946 100644
--- a/Frontend/public/aggiungi_nuova_azienda.html
+++ b/Frontend/public/aggiungi_nuova_azienda.html
@@ -3,7 +3,7 @@
 
 <head>
     <meta http-equiv="Content-Security-Policy"
-        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com; style-src 'self' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
+        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com https://cdnjs.cloudflare.com 'sha256-vvt4KWwuNr51XfE5m+hzeNEGhiOfZzG97ccfqGsPwvE='; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
     <meta charset="utf-8" />
     <meta name="viewport"
         content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
@@ -192,7 +192,8 @@
                             <div class="flex-col-gap mt-content">
                                 <!-- Sede Legale -->
                                 <div class="glass-card section-legal-container">
-                                    <div class="form-grid-responsive">
+                                    <div class="form-grid-responsive"
+                                        style="grid-template-columns: 1fr 80px; display: grid; gap: 0.75rem;">
                                         <div class="glass-field-container">
                                             <label class="view-label" for="indirizzo">Indirizzo</label>
                                             <div class="detail-field-box border-glow">
diff --git a/Frontend/public/aggiungi_scadenza.html b/Frontend/public/aggiungi_scadenza.html
index c20c9fe..2503827 100644
--- a/Frontend/public/aggiungi_scadenza.html
+++ b/Frontend/public/aggiungi_scadenza.html
@@ -134,7 +134,8 @@
 
                         <!-- Template Messaggio (Custom Dropdown Proxy) -->
                         <div id="testo_email_wrapper" class="form-group hidden">
-                            <label class="label-sm" data-t="email_template">Template Messaggio</label>
+                            <label class="label-sm" for="testo_email_select" data-t="email_template">Template
+                                Messaggio</label>
                             <div class="base-dropdown base-dropdown-full" data-custom-select="testo_email_select">
                                 <div class="base-btn-secondary dropdown-trigger" role="button" tabindex="0">
                                     <div class="dropdown-trigger-content">
@@ -169,7 +170,7 @@
                         <div class="form-grid">
                             <!-- Data Scadenza -->
                             <div class="form-group">
-                                <label class="label-sm">
+                                <label class="label-sm" for="dueDate">
                                     <span
                                         class="material-symbols-outlined icon-amber label-icon">notifications_active</span>
                                     <span data-t="expiry_date">Data Scadenza</span>
@@ -182,7 +183,8 @@
 
                             <!-- Anteprima Oggetto -->
                             <div class="form-group">
-                                <label class="label-sm" data-t="email_subject_preview">Anteprima Oggetto</label>
+                                <label class="label-sm" for="oggetto_email" data-t="email_subject_preview">Anteprima
+                                    Oggetto</label>
                                 <div class="input-wrapper read-only input-wrapper-textarea">
                                     <textarea id="oggetto_email" readonly
                                         class="input italic input-textarea-resize-none"
@@ -224,70 +226,108 @@
                     </div>
 
                     <div class="flex-col-gap-4">
-                        <!-- Email Primaria (Custom Dropdown Proxy) -->
+                        <!-- Scelta Canale -->
                         <div class="form-group">
-                            <label class="label-sm">
-                                <span class="material-symbols-outlined icon-emerald label-icon">alternate_email</span>
-                                <span data-t="primary_email">Email Primaria</span>
-                            </label>
-                            <div class="flex-col-gap-2">
-                                <div class="base-dropdown base-dropdown-full"
-                                    data-custom-select="email_primaria_select">
-                                    <button type="button" class="base-btn-secondary dropdown-trigger">
-                                        <div class="dropdown-trigger-content">
-                                            <span class="material-symbols-outlined dropdown-icon">mail</span>
-                                            <span class="dropdown-label truncate"
-                                                data-t="select_email">Seleziona...</span>
-                                        </div>
-                                        <span class="material-symbols-outlined arrow-icon">expand_more</span>
-                                    </button>
-                                    <div class="base-dropdown-menu scrollable role-menu"></div>
-                                    <select id="email_primaria_select" class="hidden"></select>
+                            <label class="label-sm" for="notif_channel_select" data-t="notification_channel">Canale di
+                                Notifica</label>
+                            <div class="base-dropdown base-dropdown-full" data-custom-select="notif_channel_select">
+                                <button type="button" class="base-btn-secondary dropdown-trigger">
+                                    <div class="dropdown-trigger-content">
+                                        <span class="material-symbols-outlined dropdown-icon">notifications</span>
+                                        <span class="dropdown-label truncate" data-t="select_channel">Scegli
+                                            canale...</span>
+                                    </div>
+                                    <span class="material-symbols-outlined arrow-icon">expand_more</span>
+                                </button>
+                                <div class="base-dropdown-menu scrollable role-menu">
+                                    <div class="dropdown-option" data-value="both" data-t="notif_both">Entrambi (Push +
+                                        Email)</div>
+                                    <div class="dropdown-option" data-value="push" data-t="notif_push_only">Solo
+                                        Notifica Push (App)</div>
+                                    <div class="dropdown-option" data-value="email" data-t="notif_email_only">Solo
+                                        Notifica Email</div>
+                                    <div class="dropdown-option" data-value="none">Nessuna (Solo in-app)</div>
                                 </div>
-                                <input id="email_primaria_input" type="email" class="input hidden"
-                                    placeholder="Inserisci email manuale...">
+                                <select id="notif_channel_select" class="hidden">
+                                    <option value="both">both</option>
+                                    <option value="push">push</option>
+                                    <option value="email">email</option>
+                                    <option value="none">none</option>
+                                </select>
                             </div>
                         </div>
 
-                        <!-- Email Secondaria (Custom Dropdown Proxy) -->
-                        <div class="form-group">
-                            <label class="label-sm" data-t="secondary_email">Email Secondaria (Opz.)</label>
-                            <div class="flex-col-gap-2">
-                                <div class="base-dropdown base-dropdown-full"
-                                    data-custom-select="email_secondaria_select">
-                                    <button type="button" class="base-btn-secondary dropdown-trigger">
-                                        <div class="dropdown-trigger-content">
-                                            <span
-                                                class="material-symbols-outlined dropdown-icon">forward_to_inbox</span>
-                                            <span class="dropdown-label truncate"
-                                                data-t="select_email">Seleziona...</span>
-                                        </div>
-                                        <span class="material-symbols-outlined arrow-icon">expand_more</span>
-                                    </button>
-                                    <div class="base-dropdown-menu scrollable role-menu"></div>
-                                    <select id="email_secondaria_select" class="hidden"></select>
+                        <!-- Sezione PUSH (Utenti Registrati) -->
+                        <div id="push_recipients_wrapper" class="form-group hidden">
+                            <label class="label-sm" for="push_users_select">
+                                <span class="material-symbols-outlined icon-blue label-icon">person_search</span>
+                                <span data-t="push_recipients">Utenti Registrati (Push)</span>
+                            </label>
+                            <div class="base-dropdown base-dropdown-full" data-multi-select="push_users_select">
+                                <button type="button" class="base-btn-secondary dropdown-trigger">
+                                    <div class="dropdown-trigger-content">
+                                        <span class="material-symbols-outlined dropdown-icon">app_registration</span>
+                                        <span class="dropdown-label truncate" data-t="select_user">Seleziona
+                                            utente...</span>
+                                    </div>
+                                    <span class="material-symbols-outlined arrow-icon">expand_more</span>
+                                </button>
+                                <div class="base-dropdown-menu scrollable role-menu" id="push_users_menu">
+                                    <!-- Popolato da JS -->
                                 </div>
-                                <input id="email_secondaria_input" type="email" class="input hidden"
-                                    placeholder="Inserisci email manuale...">
+                                <select id="push_users_select" class="hidden" multiple></select>
                             </div>
+                            <div id="selected_push_chips" class="selected-chips-container mt-2"></div>
                         </div>
 
-                        <!-- WhatsApp Beta Toggle -->
-                        <div class="whatsapp-toggle-card">
-                            <div class="whatsapp-header-row">
-                                <div class="planning-icon-box icon-emerald">
-                                    <span class="material-symbols-outlined">chat</span>
+                        <!-- Sezione EMAIL -->
+                        <div id="email_recipients_wrapper" class="flex-col-gap-4 hidden">
+                            <div class="form-group">
+                                <label class="label-sm" for="email_primaria_select">
+                                    <span
+                                        class="material-symbols-outlined icon-emerald label-icon">alternate_email</span>
+                                    <span data-t="primary_email">Email Primaria</span>
+                                </label>
+                                <div class="flex-col-gap-2">
+                                    <div class="base-dropdown base-dropdown-full"
+                                        data-custom-select="email_primaria_select">
+                                        <button type="button" class="base-btn-secondary dropdown-trigger">
+                                            <div class="dropdown-trigger-content">
+                                                <span class="material-symbols-outlined dropdown-icon">mail</span>
+                                                <span class="dropdown-label truncate"
+                                                    data-t="select_email">Seleziona...</span>
+                                            </div>
+                                            <span class="material-symbols-outlined arrow-icon">expand_more</span>
+                                        </button>
+                                        <div class="base-dropdown-menu scrollable role-menu"></div>
+                                        <select id="email_primaria_select" class="hidden"></select>
+                                    </div>
+                                    <input id="email_primaria_input" type="email" class="input hidden"
+                                        placeholder="Inserisci email manuale...">
                                 </div>
-                                <div>
-                                    <span class="whatsapp-title" data-t="whatsapp_label">Notifica (Beta)</span>
-                                    <span class="whatsapp-subtitle" data-t="whatsapp_desc">Invio
-                                        automatico</span>
+                            </div>
+                            <div class="form-group">
+                                <label class="label-sm" for="email_secondaria_select" data-t="secondary_email">Email
+                                    Secondaria (Opz.)</label>
+                                <div class="flex-col-gap-2">
+                                    <div class="base-dropdown base-dropdown-full"
+                                        data-custom-select="email_secondaria_select">
+                                        <button type="button" class="base-btn-secondary dropdown-trigger">
+                                            <div class="dropdown-trigger-content">
+                                                <span
+                                                    class="material-symbols-outlined dropdown-icon">forward_to_inbox</span>
+                                                <span class="dropdown-label truncate"
+                                                    data-t="select_email">Seleziona...</span>
+                                            </div>
+                                            <span class="material-symbols-outlined arrow-icon">expand_more</span>
+                                        </button>
+                                        <div class="base-dropdown-menu scrollable role-menu"></div>
+                                        <select id="email_secondaria_select" class="hidden"></select>
+                                    </div>
+                                    <input id="email_secondaria_input" type="email" class="input hidden"
+                                        placeholder="Inserisci email manuale...">
                                 </div>
                             </div>
-                            <label class="cursor-pointer">
-                                <input type="checkbox" id="whatsapp_enable" class="base-switch-hidden">
-                                <div class="base-switch"></div>
-                            </label>
                         </div>
                     </div>
                 </div>
@@ -301,7 +341,7 @@
                     <div class="attachments-notes-container">
                         <!-- Note -->
                         <div class="form-group">
-                            <label class="label-sm">
+                            <label class="label-sm" for="notes">
                                 <span class="material-symbols-outlined icon-amber label-icon">description</span>
                                 <span data-t="notes">Note Aggiuntive</span>
                             </label>
diff --git a/Frontend/public/assets/css/core.css b/Frontend/public/assets/css/core.css
index 31f0fe7..14ec90e 100644
--- a/Frontend/public/assets/css/core.css
+++ b/Frontend/public/assets/css/core.css
@@ -20,6 +20,19 @@ html[data-i18n="ready"] body {
     -webkit-font-smoothing: antialiased;
 }
 
+/* --- UTILITIES --- */
+.sr-only {
+    position: absolute;
+    width: 1px;
+    height: 1px;
+    padding: 0;
+    margin: -1px;
+    overflow: hidden;
+    clip: rect(0, 0, 0, 0);
+    white-space: nowrap;
+    border-width: 0;
+}
+
 html {
     scrollbar-gutter: stable;
 }
diff --git a/Frontend/public/assets/css/form_azienda.css b/Frontend/public/assets/css/form_azienda.css
index 14a3276..5559fe9 100644
--- a/Frontend/public/assets/css/form_azienda.css
+++ b/Frontend/public/assets/css/form_azienda.css
@@ -8,8 +8,8 @@
     flex-direction: column;
     align-items: center;
     position: relative;
-    margin-bottom: 2rem;
-    padding-top: 1rem;
+    margin-bottom: 1rem;
+    padding-top: 0.5rem;
     width: 100%;
 }
 
@@ -55,7 +55,7 @@
 }
 
 .detail-avatar-placeholder {
-    font-size: 40px;
+    font-size: 36px;
     opacity: 0.2;
     color: var(--text-primary);
     display: flex;
@@ -77,7 +77,7 @@
     align-items: center;
     justify-content: center;
     color: white;
-    font-size: 16px;
+    font-size: 14px;
     box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
 }
 
@@ -93,12 +93,12 @@
     display: flex;
     align-items: center;
     justify-content: center;
-    font-size: 12px;
+    font-size: 10px;
     backdrop-filter: blur(4px);
 }
 
 .hero-title {
-    font-size: 1.5rem;
+    font-size: 1.35rem;
     font-weight: 800;
     color: var(--text-primary);
     text-align: center;
@@ -109,15 +109,15 @@
 .detail-content-wrap {
     display: flex;
     flex-direction: column;
-    gap: 2rem;
+    gap: 1rem;
 }
 
 .detail-section-header {
     display: flex;
     align-items: center;
     justify-content: space-between;
-    gap: 0.75rem;
-    margin-bottom: 1rem;
+    gap: 0.5rem;
+    margin-bottom: 0.5rem;
 }
 
 .detail-section-title-wrapper {
@@ -127,7 +127,7 @@
 }
 
 .detail-section-title {
-    font-size: 0.8rem;
+    font-size: 0.72rem;
     font-weight: 700;
     color: var(--text-primary);
     text-transform: uppercase;
@@ -135,11 +135,11 @@
 }
 
 .detail-section-icon {
-    font-size: 20px;
+    font-size: 18px;
 }
 
 .section-badge-mandatory {
-    font-size: 0.6rem;
+    font-size: 0.54rem;
     font-weight: 900;
     text-transform: uppercase;
     letter-spacing: 0.1em;
@@ -152,11 +152,11 @@
     background: var(--card-bg);
     border: 1px solid var(--card-border);
     border-radius: 20px;
-    padding: 1.5rem;
+    padding: 0.75rem;
     backdrop-filter: blur(12px);
     display: flex;
     flex-direction: column;
-    gap: 1.25rem;
+    gap: 0.75rem;
 }
 
 .glass-field-container {
@@ -165,10 +165,10 @@
 
 .view-label {
     display: block;
-    font-size: 0.6rem;
+    font-size: 0.54rem;
     font-weight: 700;
     color: var(--text-secondary);
-    margin-bottom: 0.5rem;
+    margin-bottom: 0.25rem;
     text-transform: uppercase;
     letter-spacing: 0.1em;
 }
@@ -179,8 +179,8 @@
     background: var(--surface-glass);
     border: 1px solid var(--border-color);
     border-radius: 12px;
-    padding: 0 1rem;
-    height: 3.5rem;
+    padding: 0 0.5rem;
+    height: 2.2rem;
     position: relative;
     transition: border-color 0.2s;
 }
@@ -195,7 +195,7 @@
     background: transparent;
     border: none;
     color: var(--text-primary);
-    font-size: 0.95rem;
+    font-size: 0.85rem;
     font-weight: 500;
     outline: none;
     width: 100%;
@@ -221,13 +221,38 @@
 .icon-field-left {
     margin-right: 1rem;
     opacity: 0.4;
-    font-size: 20px;
+    font-size: 18px;
 }
 
 .detail-field-actions {
     display: flex;
     align-items: center;
-    gap: 0.25rem;
+    gap: 0.5rem;
+    margin-left: 0.5rem;
+}
+
+/* --- TEXTAREA / NOTE BOX --- */
+.note-box {
+    height: auto !important;
+    min-height: 80px;
+    align-items: flex-start;
+    padding: 0.75rem;
+    background: transparent !important;
+    /* Rimuove base grigia */
+}
+
+.form-textarea {
+    width: 100%;
+    min-height: 70px;
+    background: transparent !important;
+    border: none !important;
+    color: var(--text-primary) !important;
+    outline: none !important;
+    resize: none;
+    font-size: 0.85rem;
+    font-family: inherit;
+    -webkit-appearance: none;
+    appearance: none;
 }
 
 /* Checkbox Actions for QR */
@@ -235,6 +260,16 @@
     display: flex;
     align-items: center;
     padding-left: 0.5rem;
+    gap: 0.25rem;
+}
+
+.field-action-qr::after {
+    content: 'QR';
+    font-size: 0.58rem;
+    font-weight: 800;
+    color: var(--accent);
+    letter-spacing: 0.05em;
+    cursor: default;
 }
 
 .checkbox-qr {
@@ -248,19 +283,19 @@
 .form-grid-2 {
     display: grid;
     grid-template-columns: 1fr 1fr;
-    gap: 1rem;
+    gap: 0.75rem;
 }
 
 .form-grid-3 {
     display: grid;
     grid-template-columns: 1fr 1fr 1fr;
-    gap: 1rem;
+    gap: 0.75rem;
 }
 
 .form-grid-responsive {
     display: grid;
     grid-template-columns: 1fr 1fr;
-    gap: 1rem;
+    gap: 0.75rem;
 }
 
 @media (max-width: 640px) {
@@ -303,7 +338,7 @@
     display: flex;
     align-items: center;
     justify-content: space-between;
-    padding: 1rem;
+    padding: 0.75rem 1rem;
     background: rgba(255, 255, 255, 0.03);
     border: 1px solid var(--border-color);
     border-radius: 16px;
@@ -318,36 +353,48 @@
 }
 
 .collapsible-section {
-    padding: 1rem;
+    padding: 1rem 0 0 0;
+    /* Rimuoviamo padding orizzontale che restringe le card */
     border-radius: 0 0 16px 16px;
-    background: rgba(0, 0, 0, 0.2);
-    border: 1px solid var(--border-color);
-    border-top: none;
+    background: transparent;
+    border: none;
     display: flex;
     flex-direction: column;
-    gap: 1rem;
+    gap: 0.75rem;
 }
 
 /* Extra Items (Email, Sede, Attachments) */
+.inside-card,
 .email-extra-item,
 .extra-sede-item {
     background: rgba(255, 255, 255, 0.05);
-    padding: 1rem;
+    padding: 0.75rem !important;
+    /* Sovrascrive padding parent come glass-card */
     border-radius: 16px;
     border: 1px solid rgba(255, 255, 255, 0.05);
     display: flex;
     flex-direction: column;
-    gap: 0.75rem;
+    gap: 0.5rem;
     position: relative;
-    margin-bottom: 1rem;
+    margin-bottom: 0.25rem;
     animation: fadeInSlideIn 0.3s ease-out;
 }
 
+.email-card-header,
+.sede-card-header,
 .email-extra-header,
 .sede-extra-header {
     display: flex;
     align-items: center;
     justify-content: space-between;
+    gap: 1rem;
+}
+
+.email-actions-group {
+    display: flex;
+    align-items: center;
+    gap: 0.5rem;
+    flex-shrink: 0;
 }
 
 .attachment-item-edit {
@@ -366,7 +413,7 @@
     background: transparent;
     border: none;
     outline: none;
-    font-size: 0.7rem;
+    font-size: 0.63rem;
     font-weight: 800;
     text-transform: uppercase;
     letter-spacing: 0.1em;
@@ -491,7 +538,7 @@
 .flex-col-gap {
     display: flex;
     flex-direction: column;
-    gap: 1rem;
+    gap: 0.75rem;
 }
 
 .flex-col-gap-xs {
@@ -539,44 +586,60 @@
 .modal-box-source {
     width: 280px;
     padding: 1.5rem;
-    background: #0f172a;
-    border: 1px solid rgba(255, 255, 255, 0.1);
+    background: #e0f2fe;
+    /* Azzurrino per light mode */
+    border: 1px solid var(--border-color);
     border-radius: 20px;
-    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
+    box-shadow: 0 20px 40px var(--card-shadow);
     transform: scale(0.9);
     transition: transform 0.3s;
 }
 
+.dark .modal-box-source {
+    background: #0f172a;
+    border: 1px solid rgba(255, 255, 255, 0.1);
+}
+
 .modal-overlay.active .modal-box-source {
     transform: scale(1);
 }
 
 .modal-source-title {
-    opacity: 0.4;
+    opacity: 0.8;
     text-align: center;
     margin-bottom: 1rem;
+    color: var(--text-primary);
 }
 
 .modal-separator {
     margin-top: 1rem;
-    border-top: 1px solid rgba(255, 255, 255, 0.05);
+    border-top: 1px solid var(--border-color);
     padding-top: 0.5rem;
     text-align: center;
 }
 
+.dark .modal-separator {
+    border-top: 1px solid rgba(255, 255, 255, 0.05);
+}
+
 .btn-text-cancel {
     background: transparent;
     border: none;
-    color: rgba(255, 255, 255, 0.3);
+    color: #000;
+    /* Richiesto nero */
     cursor: pointer;
-    font-size: 0.8rem;
+    font-size: 0.72rem;
     font-weight: 700;
     text-transform: uppercase;
     letter-spacing: 0.1em;
     transition: color 0.2s;
 }
 
-.btn-text-cancel:hover {
+.dark .btn-text-cancel {
+    color: rgba(255, 255, 255, 0.3);
+}
+
+.dark .btn-text-cancel:hover {
     color: white;
 }
 
@@ -594,26 +657,35 @@
     gap: 0.5rem;
     padding: 1rem;
     border-radius: 12px;
-    background: transparent;
-    border: 1px solid rgba(255, 255, 255, 0.1);
+    background: rgba(255, 255, 255, 0.4);
+    border: 1px solid var(--border-color);
     cursor: pointer;
     transition: all 0.2s;
 }
 
+.dark .btn-source-option {
+    background: transparent;
+    border: 1px solid rgba(255, 255, 255, 0.1);
+}
+
 .btn-source-option:hover {
-    background: rgba(255, 255, 255, 0.05);
+    background: rgba(255, 255, 255, 0.8);
     border-color: var(--accent);
 }
 
+.dark .btn-source-option:hover {
+    background: rgba(255, 255, 255, 0.05);
+}
+
 .btn-source-option span {
-    font-size: 24px;
+    font-size: 21px;
 }
 
 .btn-source-option p {
-    font-size: 0.6rem;
+    font-size: 0.58rem;
     font-weight: 700;
     text-transform: uppercase;
-    color: var(--text-secondary);
+    color: var(--text-primary);
 }
 
 /* Animations */
diff --git a/Frontend/public/assets/js/auth.js b/Frontend/public/assets/js/auth.js
index 9457afe..ff54780 100644
--- a/Frontend/public/assets/js/auth.js
+++ b/Frontend/public/assets/js/auth.js
@@ -45,7 +45,7 @@ export function observeAuth(callback) {
  * @param {string} email - User's email.
  * @param {string} password - User's password.
  */
-async function register(nome, cognome, email, password) {
+async function register(nome, cognome, email, password, prefPush = true, prefEmail = true) {
     try {
         // Client-side Password Validation (Protocollo 12-3-3)
         if (password.length < 12) {
@@ -75,7 +75,9 @@ async function register(nome, cognome, email, password) {
             email: email,
             createdAt: new Date(),
             photoURL: "",
-            settings: { theme: 'system' }
+            settings: { theme: 'system' },
+            pref_push_enabled: prefPush,
+            pref_email_enabled: prefEmail
         });
 
         // Send email verification (optional but recommended)
@@ -85,9 +87,6 @@ async function register(nome, cognome, email, password) {
 
         showToast("Registrazione avvenuta con successo!", "success");
 
-        // Removed automatic redirect to allow user to see verification modal.
-        // You can navigate manually after verification.
-
         return true;
 
     } catch (error) {
@@ -96,14 +95,13 @@ async function register(nome, cognome, email, password) {
         if (error.code === 'auth/email-already-in-use') {
             message = "Questa email √® gi√† registrata.";
         } else if (error.code === 'auth/weak-password') {
-            message = "La password √® troppo debole (min. 6 caratteri).";
-        } else if (error.code === 'auth/weak-password-special') {
+            message = "La password √® troppo debole (min. 12 caratteri).";
+        } else if (error.code === 'auth/weak-password-upper' || error.code === 'auth/weak-password-symbols') {
             message = error.message;
         } else if (error.code === 'auth/network-request-failed') {
             message = "Problema di connessione. Riprova.";
         }
         showToast(message, "error");
-        alert(message); // Fallback alert ensures visibility if notification fails
         return false;
     }
 }
diff --git a/Frontend/public/assets/js/modules/auth/registrati.js b/Frontend/public/assets/js/modules/auth/registrati.js
index 7c992c3..e341329 100644
--- a/Frontend/public/assets/js/modules/auth/registrati.js
+++ b/Frontend/public/assets/js/modules/auth/registrati.js
@@ -81,16 +81,40 @@ function setupRegisterForm() {
         ]);
         document.body.classList.add('is-auth-progress');
 
+        const prefPush = document.getElementById('reg-pref-push')?.checked ?? true;
+        const prefEmail = document.getElementById('reg-pref-email')?.checked ?? true;
+
+        // 3. Controllo Canali Notifica
+        if (!prefPush && !prefEmail) {
+            const proceed = await showConfirmModal(t('notifications_prefs'), t('in_app_only_warn'));
+            if (!proceed) {
+                // Riabilita bottone se annulla
+                submitBtn.disabled = false;
+                clearElement(submitBtn);
+                setChildren(submitBtn, originalContent);
+                document.body.classList.remove('is-auth-progress');
+                return;
+            }
+        }
+
         try {
             console.log("[REGISTER] Creating account...");
-            await register(nome, cognome, email, password);
-
-            showToast(t('success_registration'), "success");
-
-            // Redirect al login dopo successo
-            setTimeout(() => {
-                window.location.href = "index.html";
-            }, 3000);
+            const success = await register(nome, cognome, email, password, prefPush, prefEmail);
+
+            if (success) {
+                showToast(t('success_registration'), "success");
+
+                // Redirect al login dopo successo
+                setTimeout(() => {
+                    window.location.href = "index.html";
+                }, 3000);
+            } else {
+                // Rimetto lo stato originale se fallisce internamente
+                submitBtn.disabled = false;
+                clearElement(submitBtn);
+                setChildren(submitBtn, originalContent);
+                document.body.classList.remove('is-auth-progress');
+            }
 
         } catch (err) {
             console.error("[REGISTER] Failure:", err);
diff --git a/Frontend/public/assets/js/modules/azienda/account_azienda.js b/Frontend/public/assets/js/modules/azienda/account_azienda.js
index 5faab5c..a4b04bd 100644
--- a/Frontend/public/assets/js/modules/azienda/account_azienda.js
+++ b/Frontend/public/assets/js/modules/azienda/account_azienda.js
@@ -59,7 +59,7 @@ function setupUI() {
         clearElement(hLeft);
         setChildren(hLeft, createElement('button', {
             className: 'btn-icon-header',
-            onclick: () => window.location.href = `dettaglio_azienda.html?id=${currentAziendaId}`
+            onclick: () => window.location.href = `dati_azienda.html?id=${currentAziendaId}`
         }, [
             createElement('span', { className: 'material-symbols-outlined', textContent: 'arrow_back' })
         ]));
diff --git a/Frontend/public/assets/js/modules/azienda/dati_azienda.js b/Frontend/public/assets/js/modules/azienda/dati_azienda.js
index dddc059..463cd47 100644
--- a/Frontend/public/assets/js/modules/azienda/dati_azienda.js
+++ b/Frontend/public/assets/js/modules/azienda/dati_azienda.js
@@ -276,14 +276,26 @@ function renderEmailCategories(data) {
     if (!container) return;
 
     const emailEntries = [
-        { id: 'pec', label: 'PEC', icon: 'verified_user', email: data.aziendaEmail || data.emails?.pec?.email, password: data.emails?.pec?.password || data.aziendaEmailPassword },
-        { id: 'amministrazione', label: 'Amm.ne', icon: 'payments', email: data.emails?.amministrazione?.email, password: data.emails?.amministrazione?.password },
-        { id: 'personale', label: 'Personale', icon: 'group', email: data.emails?.personale?.email, password: data.emails?.personale?.password },
-        { id: 'manutenzione', label: 'Manutenz.', icon: 'build_circle', email: data.emails?.manutenzione?.email, password: data.emails?.manutenzione?.password },
-        { id: 'attrezzatura', label: 'Attrezzat.', icon: 'precision_manufacturing', email: data.emails?.attrezzatura?.email, password: data.emails?.attrezzatura?.password },
-        { id: 'magazzino', label: 'Magazzino', icon: 'inventory_2', email: data.emails?.magazzino?.email, password: data.emails?.magazzino?.password }
+        { id: 'pec', label: data.emails?.pec?.tipo || 'PEC', icon: 'verified_user', email: data.aziendaEmail || data.emails?.pec?.email, password: data.emails?.pec?.password || data.aziendaEmailPassword },
+        { id: 'amministrazione', label: data.emails?.amministrazione?.tipo || 'Amm.ne', icon: 'payments', email: data.emails?.amministrazione?.email, password: data.emails?.amministrazione?.password },
+        { id: 'personale', label: data.emails?.personale?.tipo || 'Personale', icon: 'group', email: data.emails?.personale?.email, password: data.emails?.personale?.password }
     ].filter(c => c.email);
 
+    // Add Extra Emails
+    if (data.emails?.extra && Array.isArray(data.emails.extra)) {
+        data.emails.extra.forEach((e, i) => {
+            if (e.email) {
+                emailEntries.push({
+                    id: `extra-${i}`,
+                    label: e.tipo || 'Email',
+                    icon: 'mail',
+                    email: e.email,
+                    password: e.password
+                });
+            }
+        });
+    }
+
     if (emailEntries.length > 0) {
         wrap?.classList.remove('hidden');
         clearElement(container);
@@ -418,12 +430,33 @@ function buildVCard(data) {
         v += `TEL;TYPE=CELL:${data.referenteCellulare}\n`;
     }
 
-    // Email (PEC) - Key map: aziendaEmail (from modify page flag) -> matches data.emails.pec
+    // Email (PEC)
     const pecEmail = data.emails?.pec?.email || data.aziendaEmail;
     if (config.aziendaEmail !== false && pecEmail) {
         v += `EMAIL;TYPE=WORK,INTERNET:${pecEmail}\n`;
     }
 
+    // Email (Amministrazione)
+    const adminEmail = data.emails?.amministrazione?.email;
+    if (config.adminEmail && adminEmail) {
+        v += `EMAIL;TYPE=WORK,INTERNET:${adminEmail}\n`;
+    }
+
+    // Email (Personale)
+    const persEmail = data.emails?.personale?.email;
+    if (config.persEmail && persEmail) {
+        v += `EMAIL;TYPE=HOME,INTERNET:${persEmail}\n`;
+    }
+
+    // Extra Emails
+    if (data.emails?.extra && Array.isArray(data.emails.extra)) {
+        data.emails.extra.forEach(e => {
+            if (e.qr !== false && e.email) {
+                v += `EMAIL;TYPE=WORK,INTERNET:${e.email}\n`;
+            }
+        });
+    }
+
     // Extra Data in NOTE or Custom Fields
     let notes = [];
     if (config.partitaIva !== false && data.partitaIva) notes.push(`P.IVA: ${data.partitaIva}`);
diff --git a/Frontend/public/assets/js/modules/azienda/form_account_azienda.js b/Frontend/public/assets/js/modules/azienda/form_account_azienda.js
index e741c4e..e1c59b1 100644
--- a/Frontend/public/assets/js/modules/azienda/form_account_azienda.js
+++ b/Frontend/public/assets/js/modules/azienda/form_account_azienda.js
@@ -777,7 +777,7 @@ window.saveAccount = async () => {
         });
 
         showToast(t('success_save'), "success");
-        setTimeout(() => window.location.href = 'dettaglio_azienda.html?id=' + currentAziendaId, 1000);
+        setTimeout(() => window.location.href = 'dati_azienda.html?id=' + currentAziendaId, 1000);
 
     } catch (e) {
         console.error("[V3.1-ERROR] SaveAccount Azienda Failed:", e);
diff --git a/Frontend/public/assets/js/modules/azienda/modifica_azienda.js b/Frontend/public/assets/js/modules/azienda/modifica_azienda.js
index d0a2d12..0a3a8ad 100644
--- a/Frontend/public/assets/js/modules/azienda/modifica_azienda.js
+++ b/Frontend/public/assets/js/modules/azienda/modifica_azienda.js
@@ -97,8 +97,14 @@ function initFormEvents() {
 
     // Toggles & Sections
     document.body.addEventListener('click', (e) => {
+        // Se il click √® su un elemento che deve fermare la propagazione del toggle (es. input, button cestino)
+        if (e.target.closest('[data-stop-propagation]')) return;
+
         const btnToggle = e.target.closest('.btn-toggle-section');
-        if (btnToggle) toggleSection(btnToggle.dataset.target, btnToggle);
+        if (btnToggle) {
+            e.preventDefault();
+            toggleSection(btnToggle.dataset.target, btnToggle);
+        }
 
         const btnPass = e.target.closest('.btn-toggle-pass');
         if (btnPass) {
@@ -156,8 +162,7 @@ function openSourceSelector() {
     console.log("Opening Source Selector Modifica Azienda");
     const modal = document.getElementById('source-selector-modal');
     if (modal) {
-        modal.classList.remove('invisible', 'opacity-0');
-        // modal.classList.add('active'); // Manteniamo per sicurezza
+        modal.classList.add('active');
         document.body.style.overflow = 'hidden';
     } else {
         console.error("Modale non trovato");
@@ -167,8 +172,7 @@ function openSourceSelector() {
 function closeSourceSelector() {
     const modal = document.getElementById('source-selector-modal');
     if (modal) {
-        modal.classList.add('invisible', 'opacity-0');
-        // modal.classList.remove('active');
+        modal.classList.remove('active');
         document.body.style.overflow = '';
     }
 }
@@ -189,17 +193,37 @@ function handleImagePreview(e, previewId, placeholderId) {
 
 function toggleSection(id, btn) {
     const el = document.getElementById(id);
-    const arrow = btn.querySelector('.chevron') || document.getElementById('arrow-' + id);
+    const arrow = btn.querySelector('.chevron') || btn.querySelector('.icon-chevron') || document.getElementById('arrow-' + id);
     if (!el) return;
 
+    // Se ha la classe hidden-content, la rimuoviamo per permettere il calcolo delle dimensioni
+    if (el.classList.contains('hidden-content')) {
+        el.classList.remove('hidden-content');
+        el.style.maxHeight = '0px'; // Assicuriamo che parta da 0 se era nascosto via classe
+    }
+
     const isOpen = el.style.maxHeight && el.style.maxHeight !== '0px';
 
     if (isOpen) {
         el.style.maxHeight = '0px';
         if (arrow) arrow.style.transform = 'rotate(0deg)';
+        // Opzionale: rimettiamo la classe dopo la transizione (400ms)
+        setTimeout(() => {
+            if (el.style.maxHeight === '0px') el.classList.add('hidden-content');
+        }, 400);
     } else {
-        el.style.maxHeight = el.scrollHeight + 'px';
+        // Rimuoviamo preventivamente la classe se presente (doppio controllo)
+        el.classList.remove('hidden-content');
+        // Forza il ricalcolo per permettere la transizione da 0 a scrollHeight
+        const contentHeight = el.scrollHeight;
+        el.style.maxHeight = contentHeight + 'px';
         if (arrow) arrow.style.transform = 'rotate(180deg)';
+
+        // Per evitare problemi con contenuti dinamici che cambiano altezza, 
+        // dopo la transizione possiamo mettere 'none' o 'max-content'
+        setTimeout(() => {
+            if (el.style.maxHeight !== '0px') el.style.maxHeight = 'none';
+        }, 400);
     }
 }
 
@@ -207,6 +231,9 @@ function populateForm(data) {
     const set = (id, val) => { const el = document.getElementById(id); if (el) el.value = val || ''; };
 
     set('ragione-sociale', data.ragioneSociale);
+    set('tipo-sede-legale', data.tipoSedeLegale || 'Sede Legale');
+    set('telefono-azienda', data.telefonoAzienda);
+    set('fax-azienda', data.faxAzienda);
     set('piva', data.partitaIva);
     set('codice-sdi', data.codiceSDI);
     set('referente-titolo', data.referenteTitolo);
@@ -223,13 +250,18 @@ function populateForm(data) {
     set('note-azienda', data.note);
 
     if (data.emails) {
+        set('type-pec', data.emails.pec?.tipo || 'PEC Aziendale');
         set('email-pec', data.emails.pec?.email);
         set('email-pec-password', data.emails.pec?.password);
         set('email-pec-note', data.emails.pec?.note);
+        set('type-amministrazione', data.emails.amministrazione?.tipo || 'Amministrazione');
         set('email-amministrazione', data.emails.amministrazione?.email);
         set('email-amministrazione-password', data.emails.amministrazione?.password);
+        set('email-amministrazione-note', data.emails.amministrazione?.note);
+        set('type-personale', data.emails.personale?.tipo || 'Personale');
         set('email-personale', data.emails.personale?.email);
         set('email-personale-password', data.emails.personale?.password);
+        set('email-personale-note', data.emails.personale?.note);
 
         // Extra Sedi
         const sediContainer = document.getElementById('altre-sedi-container');
@@ -254,7 +286,8 @@ function populateForm(data) {
                     addExtraEmail({
                         tipo: key, // Use key as type label
                         email: obj.email || '',
-                        password: obj.password || ''
+                        password: obj.password || '',
+                        note: obj.note || ''
                     });
                 }
             }
@@ -279,24 +312,7 @@ function populateForm(data) {
         if (h) h.classList.add('hidden');
     }
 
-    if (data.altreSedi) {
-        const admin = data.altreSedi.find(s => s.tipo === 'Sede Amministrativa');
-        if (admin) {
-            set('admin-indirizzo', admin.indirizzo);
-            set('admin-civico', admin.civico);
-            set('admin-citta', admin.citta);
-            set('admin-provincia', admin.provincia);
-            set('admin-cap', admin.cap);
-        }
-        const oper = data.altreSedi.find(s => s.tipo === 'Sede Operativa');
-        if (oper) {
-            set('oper-indirizzo', oper.indirizzo);
-            set('oper-civico', oper.civico);
-            set('oper-citta', oper.citta);
-            set('oper-provincia', oper.provincia);
-            set('oper-cap', oper.cap);
-        }
-    }
+
 
     document.querySelectorAll('input[data-qr-field]').forEach(cb => {
         const field = cb.dataset.qrField;
@@ -340,11 +356,12 @@ function renderAttachments() {
                     }),
                     createElement('span', {
                         className: 'text-[8px] font-bold text-white/20 uppercase tracking-widest',
-                        textContent: f.existing ? (t('uploaded') || 'Caricato') : (t('new') || 'Nuovo')
+                        textContent: f.existing ? (t('uploaded')) : (t('new'))
                     })
                 ])
             ]),
             createElement('button', {
+                type: 'button',
                 className: 'btn-remove-item',
                 onclick: () => removeAttachment(f.idx, f.existing)
             }, [
@@ -353,7 +370,9 @@ function renderAttachments() {
         ]);
     });
 
-    setChildren(list, cards);
+    setChildren(list, cards.length ? cards : [
+        createElement('p', { className: 'no-attachments-text', 'data-t': 'no_attachments', textContent: t('no_attachments') })
+    ]);
 }
 
 function removeAttachment(idx, existing) {
@@ -365,153 +384,199 @@ function removeAttachment(idx, existing) {
 function addExtraEmail(data = null) {
     const container = document.getElementById('email-extra-container');
     if (!container) return;
+    const uniqueId = 'email-' + Date.now() + '-' + Math.random().toString(36).substr(2, 5);
+    const bodyId = `body_${uniqueId}`;
+    const arrowId = `arrow-${bodyId}`;
 
-    const wrapper = createElement('div', { className: 'email-extra-item' });
+    const wrapper = createElement('div', { className: 'glass-card inside-card email-extra-item' });
 
-    // Header con Tipo e Remove
-    const header = createElement('div', { className: 'email-extra-header' }, [
+    // HEADER
+    const header = createElement('div', {
+        className: 'email-card-header btn-toggle-section',
+        'data-target': bodyId
+    }, [
         createElement('input', {
+            id: `type_${uniqueId}`,
             type: 'text',
-            className: 'email-type-input',
-            placeholder: 'TIPO EMAIL (ES. ORDINI)',
+            className: 'email-type-input email-type',
+            placeholder: t('email_type_placeholder') || 'TIPO EMAIL',
             value: data ? data.tipo : '',
-            'aria-label': 'Tipo Email'
+            'data-stop-propagation': true,
+            autocomplete: 'new-password'
         }),
-        createElement('button', {
-            type: 'button',
-            className: 'btn-remove-item',
-            onclick: () => wrapper.remove(),
-            'aria-label': 'Rimuovi email'
-        }, [
-            createElement('span', { className: 'material-symbols-outlined text-sm', textContent: 'delete' })
-        ])
-    ]);
-
-    // Email Input
-    const emailBox = createElement('div', { className: 'glass-field-container' }, [
-        createElement('div', { className: 'detail-field-box border-glow h-9' }, [
-            createElement('input', {
-                type: 'email',
-                className: 'detail-field-input email-value',
-                placeholder: 'Indirizzo Email',
-                value: data ? data.email : '',
-                'aria-label': 'Indirizzo Email Extra'
+        createElement('div', { className: 'email-actions-group' }, [
+            createElement('div', { className: 'field-action-qr opacity-40' }, [
+                createElement('input', {
+                    id: `qr_${uniqueId}`,
+                    type: 'checkbox',
+                    className: 'checkbox-qr email-qr',
+                    checked: data ? (data.qr !== false) : true,
+                    'data-stop-propagation': true
+                }),
+                createElement('label', { for: `qr_${uniqueId}`, className: 'sr-only', textContent: 'QR' })
+            ]),
+            createElement('button', {
+                type: 'button',
+                className: 'btn-remove-item',
+                'data-stop-propagation': true,
+                onclick: () => wrapper.remove()
+            }, [
+                createElement('span', { className: 'material-symbols-outlined text-sm', textContent: 'delete' })
+            ]),
+            createElement('span', {
+                id: arrowId,
+                className: 'material-symbols-outlined icon-chevron transition-transform',
+                textContent: 'expand_more'
             })
         ])
     ]);
 
-    // Password Input
-    const uniqueId = 'pass-' + Date.now() + '-' + Math.random().toString(36).substr(2, 5);
-    const passBox = createElement('div', { className: 'glass-field-container' }, [
-        createElement('div', { className: 'detail-field-box border-glow h-9' }, [
-            createElement('input', {
-                id: uniqueId,
-                type: 'text',
-                className: 'detail-field-input base-shield email-pass',
-                placeholder: 'Password',
-                value: data ? data.password : '',
-                'aria-label': 'Password Email Extra'
-            }),
-            createElement('div', { className: 'detail-field-actions pr-2' }, [
-                createElement('button', {
-                    type: 'button',
-                    className: 'btn-toggle-pass',
-                    'data-target': uniqueId
-                }, [
-                    createElement('span', { className: 'material-symbols-outlined text-sm', textContent: 'visibility' })
+    // BODY
+    const body = createElement('div', {
+        id: bodyId,
+        className: 'email-card-body collapsible-section'
+    }, [
+        // Email Input
+        createElement('div', { className: 'glass-field-container' }, [
+            createElement('label', { className: 'view-label', textContent: t('email_address') }),
+            createElement('div', { className: 'detail-field-box border-glow' }, [
+                createElement('input', {
+                    type: 'email',
+                    className: 'detail-field-input email-value',
+                    placeholder: 'codex@codex.it',
+                    value: data ? data.email : '',
+                    autocomplete: 'new-password'
+                })
+            ])
+        ]),
+        // Password Input
+        createElement('div', { className: 'glass-field-container' }, [
+            createElement('label', { className: 'view-label', textContent: t('password') }),
+            createElement('div', { className: 'detail-field-box border-glow' }, [
+                createElement('input', {
+                    type: 'text',
+                    className: 'detail-field-input base-shield email-pass',
+                    placeholder: 'Password',
+                    value: data ? data.password : '',
+                    autocomplete: 'new-password'
+                }),
+                createElement('div', { className: 'detail-field-actions pr-2' }, [
+                    createElement('button', {
+                        type: 'button',
+                        className: 'btn-toggle-pass'
+                    }, [
+                        createElement('span', { className: 'material-symbols-outlined text-sm', textContent: 'visibility' })
+                    ])
                 ])
             ])
+        ]),
+        // Note Input
+        createElement('div', { className: 'glass-field-container' }, [
+            createElement('label', { className: 'view-label', textContent: t('notes') }),
+            createElement('div', { className: 'detail-field-box border-glow note-box' }, [
+                createElement('textarea', {
+                    className: 'form-textarea email-note',
+                    placeholder: 'Note accessorie email...',
+                    textContent: data ? data.note : '',
+                    autocomplete: 'new-password'
+                })
+            ])
         ])
     ]);
 
-    setChildren(wrapper, [header, emailBox, passBox]);
+    setChildren(wrapper, [header, body]);
     container.appendChild(wrapper);
 }
 
 function addExtraSede(data = null) {
     const container = document.getElementById('altre-sedi-container');
     if (!container) return;
+    const uniqueId = 'sede-' + Date.now() + '-' + Math.random().toString(36).substr(2, 5);
+    const bodyId = `body_${uniqueId}`;
+    const arrowId = `arrow-${bodyId}`;
 
-    const uniqueId = `sede-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;
-    const wrapper = createElement('div', { className: 'extra-sede-item' });
+    const wrapper = createElement('div', { className: 'glass-card inside-card extra-sede-item' });
 
-    // Header
-    const header = createElement('div', { className: 'sede-extra-header cursor-pointer' }, [
+    // HEADER
+    const header = createElement('div', {
+        className: 'email-card-header btn-toggle-section',
+        'data-target': bodyId
+    }, [
         createElement('div', { className: 'flex items-center gap-3 flex-1' }, [
             createElement('span', { className: 'material-symbols-outlined text-icon-purple', textContent: 'domain' }),
-            createElement('div', { className: 'flex-1' }, [
-                createElement('input', {
-                    type: 'text',
-                    className: 'email-type-input sede-tipo',
-                    placeholder: 'TIPO SEDE (ES. OPERATIVA)',
-                    value: data ? (data.tipo || '').replace('Sede ', '') : '',
-                    onclick: (e) => e.stopPropagation()
-                })
-            ]),
-            createElement('div', { className: 'flex items-center gap-1 opacity-40' }, [
+            createElement('input', {
+                id: `tipo_${uniqueId}`,
+                type: 'text',
+                className: 'email-type-input sede-tipo',
+                placeholder: t('office_type_placeholder') || 'TIPO SEDE',
+                value: data ? (data.tipo || '').replace('Sede ', '') : '',
+                'data-stop-propagation': true,
+                autocomplete: 'new-password'
+            })
+        ]),
+        createElement('div', { className: 'email-actions-group' }, [
+            createElement('div', { className: 'field-action-qr opacity-40' }, [
                 createElement('input', {
+                    id: `qr_${uniqueId}`,
                     type: 'checkbox',
                     className: 'checkbox-qr sede-qr',
                     checked: data ? (data.qr !== false) : true,
-                    onclick: (e) => e.stopPropagation(),
-                    'aria-label': 'Includi nel QR'
+                    'data-stop-propagation': true
                 }),
-                createElement('span', { className: 'text-[8px] font-bold uppercase', textContent: 'QR' })
-            ])
-        ]),
-        createElement('div', { className: 'flex items-center gap-2' }, [
+                createElement('label', { for: `qr_${uniqueId}`, className: 'sr-only', textContent: 'QR' })
+            ]),
             createElement('button', {
                 type: 'button',
                 className: 'btn-remove-item',
-                onclick: (e) => { e.stopPropagation(); wrapper.remove(); }
-            }, [createElement('span', { className: 'material-symbols-outlined text-sm', textContent: 'delete' })]),
+                'data-stop-propagation': true,
+                onclick: () => wrapper.remove()
+            }, [
+                createElement('span', { className: 'material-symbols-outlined text-sm', textContent: 'delete' })
+            ]),
             createElement('span', {
-                className: 'material-symbols-outlined text-white/20 transition-transform duration-300',
-                textContent: 'expand_more',
-                id: `arrow-${uniqueId}`
+                id: arrowId,
+                className: 'material-symbols-outlined icon-chevron transition-transform',
+                textContent: 'expand_more'
             })
         ])
     ]);
 
-    // Body
-    const body = createElement('div', { id: `body-${uniqueId}`, className: 'hidden mt-2 flex-col-gap' }, [
+    // BODY
+    const body = createElement('div', {
+        id: bodyId,
+        className: 'email-card-body collapsible-section'
+    }, [
         createElement('div', { className: 'form-grid-3' }, [
-            createFieldBox('Indirizzo', 'text', data?.indirizzo, 'sede-indirizzo', 'Via / Piazza'),
-            createFieldBox('N.', 'text', data?.civico, 'sede-civico', 'N.', true)
+            createFieldBox('Indirizzo', 'address', 'text', data?.indirizzo, 'sede-indirizzo', 'Via / Piazza', 'address_placeholder'),
+            createFieldBox('N.', '', 'text', data?.civico, 'sede-civico', 'N.', 'civic_number', true)
         ]),
         createElement('div', { className: 'form-grid-3' }, [
-            createFieldBox('Citt√†', 'text', data?.citta, 'sede-citta', 'Citt√†'),
-            createFieldBox('Prov', 'text', data?.provincia, 'sede-provincia', 'PR', true, true),
-            createFieldBox('CAP', 'tel', data?.cap, 'sede-cap', 'CAP', true)
+            createFieldBox('Citt√†', 'city', 'text', data?.citta, 'sede-citta', 'Citt√†', 'city'),
+            createFieldBox('Prov', 'province', 'text', data?.provincia, 'sede-provincia', 'PR', 'province_short', true, true),
+            createFieldBox('CAP', 'cap', 'tel', data?.cap, 'sede-cap', 'CAP', 'cap', true)
         ])
     ]);
 
-    // Toggle
-    header.addEventListener('click', () => {
-        const arrow = header.querySelector(`#arrow-${uniqueId}`);
-        if (body.classList.contains('hidden')) {
-            body.classList.remove('hidden');
-            if (arrow) arrow.style.transform = 'rotate(180deg)';
-        } else {
-            body.classList.add('hidden');
-            if (arrow) arrow.style.transform = 'rotate(0deg)';
-        }
-    });
-
     setChildren(wrapper, [header, body]);
     container.appendChild(wrapper);
 }
 
-function createFieldBox(label, type, val, cls, place, center = false, uppercase = false) {
+function createFieldBox(labelText, labelT, type, val, cls, place, placeT, center = false, uppercase = false) {
+    const uniqueId = `field_${Math.random().toString(36).substr(2, 5)}`;
+    const fieldId = `id_${cls}_${uniqueId}`;
     return createElement('div', { className: 'glass-field-container' }, [
-        createElement('label', { className: 'view-label', textContent: label }),
-        createElement('div', { className: 'detail-field-box border-glow h-10' }, [
+        createElement('label', { className: 'view-label', for: fieldId, 'data-t': labelT, textContent: t(labelT) || labelText }),
+        createElement('div', { className: 'detail-field-box border-glow' }, [
             createElement('input', {
+                id: fieldId,
                 type: type,
+                name: `${cls}_${uniqueId}`,
                 className: `detail-field-input ${cls} ${center ? 'text-center' : ''} ${uppercase ? 'uppercase' : ''}`,
                 value: val || '',
                 placeholder: place,
-                maxLength: uppercase ? 2 : (cls.includes('cap') ? 5 : undefined)
+                'data-t-placeholder': placeT,
+                maxLength: uppercase ? 2 : (cls.includes('cap') ? 5 : undefined),
+                autocomplete: 'new-password', autocorrect: 'off', spellcheck: 'false'
             })
         ])
     ]);
@@ -547,6 +612,9 @@ async function saveAzienda() {
 
         const data = {
             ragioneSociale,
+            tipoSedeLegale: document.getElementById('tipo-sede-legale')?.value.trim() || 'Sede Legale',
+            telefonoAzienda: document.getElementById('telefono-azienda')?.value.trim(),
+            faxAzienda: document.getElementById('fax-azienda')?.value.trim(),
             partitaIva: document.getElementById('piva')?.value.trim(),
             codiceSDI: document.getElementById('codice-sdi')?.value.trim().toUpperCase(),
             referenteTitolo: document.getElementById('referente-titolo')?.value.trim(),
@@ -561,23 +629,30 @@ async function saveAzienda() {
             numeroCCIAA: document.getElementById('numero-cciaa')?.value.trim(),
             dataIscrizione: document.getElementById('data-iscrizione')?.value,
             emails: {
-                pec: {
+                pec: document.getElementById('type-pec') ? {
+                    tipo: document.getElementById('type-pec').value.trim(),
                     email: document.getElementById('email-pec')?.value.trim(),
                     password: document.getElementById('email-pec-password')?.value.trim(),
                     note: document.getElementById('email-pec-note')?.value.trim()
-                },
-                amministrazione: {
+                } : null,
+                amministrazione: document.getElementById('type-amministrazione') ? {
+                    tipo: document.getElementById('type-amministrazione').value.trim(),
                     email: document.getElementById('email-amministrazione')?.value.trim(),
-                    password: document.getElementById('email-amministrazione-password')?.value.trim()
-                },
-                personale: {
+                    password: document.getElementById('email-amministrazione-password')?.value.trim(),
+                    note: document.getElementById('email-amministrazione-note')?.value.trim()
+                } : null,
+                personale: document.getElementById('type-personale') ? {
+                    tipo: document.getElementById('type-personale').value.trim(),
                     email: document.getElementById('email-personale')?.value.trim(),
-                    password: document.getElementById('email-personale-password')?.value.trim()
-                },
+                    password: document.getElementById('email-personale-password')?.value.trim(),
+                    note: document.getElementById('email-personale-note')?.value.trim()
+                } : null,
                 extra: Array.from(document.querySelectorAll('.email-extra-item')).map(el => ({
                     tipo: el.querySelector('.email-type')?.value.trim(),
                     email: el.querySelector('.email-value')?.value.trim(),
-                    password: el.querySelector('.email-pass')?.value.trim()
+                    password: el.querySelector('.email-pass')?.value.trim(),
+                    note: el.querySelector('.email-note')?.value.trim(),
+                    qr: el.querySelector('.email-qr')?.checked
                 })).filter(e => e.tipo || e.email)
             },
             note: document.getElementById('note-azienda')?.value.trim(),
diff --git a/Frontend/public/assets/js/modules/scadenze/aggiungi_scadenza.js b/Frontend/public/assets/js/modules/scadenze/aggiungi_scadenza.js
index 377a29c..d66b8f9 100644
--- a/Frontend/public/assets/js/modules/scadenze/aggiungi_scadenza.js
+++ b/Frontend/public/assets/js/modules/scadenze/aggiungi_scadenza.js
@@ -5,7 +5,7 @@
  */
 
 import { db, auth, storage } from '../../firebase-config.js';
-import { collection, addDoc, Timestamp, doc, getDoc, updateDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
+import { collection, addDoc, Timestamp, doc, getDoc, getDocs, updateDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
 import { ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-storage.js";
 import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
 import { EMAILS, buildEmailSubject } from './scadenza_templates.js';
@@ -85,6 +85,9 @@ export async function initAggiungiScadenza(user) {
 
     initProxyDropdowns();
     initAttachmentSystem();
+    setupNotificationChannels();
+    setupMultiSelects();
+    await loadPushUsers();
 
     // --- FOOTER ACTIONS SYSTEM (Home Page Style) ---
     const interval = setInterval(() => {
@@ -536,6 +539,152 @@ function updateAttachmentsUI() {
     }
 }
 
+/**
+ * Logica Canali di Notifica (Push/Email)
+ */
+function setupNotificationChannels() {
+    const channelSelect = document.getElementById('notif_channel_select');
+    const pushWrapper = document.getElementById('push_recipients_wrapper');
+    const emailWrapper = document.getElementById('email_recipients_wrapper');
+
+    if (!channelSelect) return;
+
+    channelSelect.addEventListener('change', () => {
+        const val = channelSelect.value;
+        if (val === 'push') {
+            pushWrapper?.classList.remove('hidden');
+            emailWrapper?.classList.add('hidden');
+        } else if (val === 'email') {
+            pushWrapper?.classList.add('hidden');
+            emailWrapper?.classList.remove('hidden');
+        } else if (val === 'both') {
+            pushWrapper?.classList.remove('hidden');
+            emailWrapper?.classList.remove('hidden');
+        } else {
+            pushWrapper?.classList.add('hidden');
+            emailWrapper?.classList.add('hidden');
+        }
+    });
+}
+
+/**
+ * Caricamento Utenti per Push (dalla Rubrica)
+ */
+async function loadPushUsers() {
+    if (!currentUser) return;
+    const menu = document.getElementById('push_users_menu');
+    const nativeSelect = document.getElementById('push_users_select');
+    if (!menu || !nativeSelect) return;
+
+    try {
+        const snap = await getDocs(collection(db, "users", currentUser.uid, "contacts"));
+        clearElement(menu);
+        clearElement(nativeSelect);
+
+        if (snap.empty) {
+            menu.appendChild(createElement('div', { className: 'dropdown-option disabled', textContent: 'Nessun contatto salvato' }));
+            return;
+        }
+
+        snap.forEach(docSnap => {
+            const contact = docSnap.data();
+            const displayName = `${contact.nome} ${contact.cognome || ''}`.trim();
+            const email = contact.email; // Usiamo l'email come identificatore per ora
+
+            const opt = createElement('div', {
+                className: 'dropdown-option',
+                dataset: { value: email, label: displayName },
+                textContent: displayName,
+                onclick: (e) => {
+                    e.stopPropagation();
+                    togglePushRecipient(email, displayName);
+                }
+            });
+            menu.appendChild(opt);
+
+            const nativeOpt = new Option(displayName, email);
+            nativeSelect.appendChild(nativeOpt);
+        });
+
+        // Se abbiamo gi√† dei destinatari selezionati (es. caricati da Edit), aggiorniamo le label reali dalla rubrica
+        if (selectedPushRecipients.length > 0) {
+            selectedPushRecipients.forEach(r => {
+                const found = Array.from(nativeSelect.options).find(opt => opt.value === r.email);
+                if (found) r.label = found.textContent;
+            });
+            updatePushChips();
+        }
+
+    } catch (e) {
+        console.error("Load Push Users Error:", e);
+    }
+}
+
+let selectedPushRecipients = []; // Array di {email, label}
+
+function togglePushRecipient(email, label) {
+    const idx = selectedPushRecipients.findIndex(r => r.email === email);
+    if (idx === -1) {
+        selectedPushRecipients.push({ email, label });
+    } else {
+        selectedPushRecipients.splice(idx, 1);
+    }
+    updatePushChips();
+    syncNativePushSelect();
+}
+
+function updatePushChips() {
+    const container = document.getElementById('selected_push_chips');
+    const menu = document.getElementById('push_users_menu');
+    if (!container) return;
+    clearElement(container);
+
+    selectedPushRecipients.forEach(r => {
+        const chip = createElement('div', { className: 'selected-chip' }, [
+            createElement('span', { className: 'chip-text', textContent: r.label }),
+            createElement('span', {
+                className: 'material-symbols-outlined chip-remove',
+                textContent: 'cancel',
+                onclick: (e) => {
+                    e.stopPropagation();
+                    togglePushRecipient(r.email, r.label);
+                }
+            })
+        ]);
+        container.appendChild(chip);
+    });
+
+    // Sync active class in menu
+    if (menu) {
+        menu.querySelectorAll('.dropdown-option').forEach(opt => {
+            const val = opt.dataset.value;
+            opt.classList.toggle('active', selectedPushRecipients.some(r => r.email === val));
+        });
+    }
+}
+
+function syncNativePushSelect() {
+    const select = document.getElementById('push_users_select');
+    if (!select) return;
+    Array.from(select.options).forEach(opt => {
+        opt.selected = selectedPushRecipients.some(r => r.email === opt.value);
+    });
+}
+
+function setupMultiSelects() {
+    document.addEventListener('click', (e) => {
+        const trigger = e.target.closest('[data-multi-select] .dropdown-trigger');
+        if (trigger) {
+            e.stopPropagation();
+            const container = trigger.closest('[data-multi-select]');
+            const menu = container.querySelector('.base-dropdown-menu');
+            if (menu) menu.classList.toggle('show');
+        } else {
+            document.querySelectorAll('[data-multi-select] .base-dropdown-menu.show').forEach(m => m.classList.remove('show'));
+        }
+    });
+}
+
 function setupSaveLogic() {
     const btnSave = document.getElementById('save-btn');
     if (!btnSave) return;
@@ -562,10 +711,25 @@ function setupSaveLogic() {
         const email1 = (emailPrimariaSelect.value === 'manual') ? document.getElementById('email_primaria_input').value.trim() : emailPrimariaSelect.value;
         const email2 = (emailSecondariaSelect.value === 'manual') ? document.getElementById('email_secondaria_input').value.trim() : emailSecondariaSelect.value;
 
-        if (!name || !type || !date || !email1) {
+        const notifChannel = document.getElementById('notif_channel_select').value;
+        const pushRecipients = selectedPushRecipients.map(r => r.email);
+
+        if (!name || !type || !date) {
             return showToast("Compila i campi obbligatori", "error");
         }
 
+        // Validazione Canali
+        if (notifChannel === 'email' || notifChannel === 'both') {
+            if (!email1) return showToast("Seleziona un'email per le notifiche", "error");
+        }
+        if (notifChannel === 'push' || notifChannel === 'both') {
+            if (pushRecipients.length === 0) return showToast("Seleziona almeno un utente per le notifiche push", "error");
+        }
+        if (notifChannel === 'none') {
+            const proceed = await showConfirmModal(t('notification_channel'), t('in_app_only_warn'));
+            if (!proceed) return;
+        }
+
         const data = {
             uid: currentUser.uid,
             type,
@@ -576,9 +740,10 @@ function setupSaveLogic() {
             dueDate: date,
             notes: document.getElementById('notes').value,
             emails: [email1, email2].filter(e => e && e !== 'manual'),
-            whatsappEnabled: document.getElementById('whatsapp_enable').checked,
+            notificationChannel: notifChannel,
+            pushRecipients: pushRecipients,
             notificationDaysBefore: parseInt(notifDaysInput.value),
-            notificationFrequency: parseInt(notifFreqInput.value), // Corretto id variabile locale
+            notificationFrequency: parseInt(notifFreqInput.value),
             createdAt: Timestamp.now(),
             status: 'active',
             completed: false
@@ -816,7 +981,22 @@ async function loadScadenzaForEdit(id) {
             dateInput.dataset.isoValue = '';
         }
         document.getElementById('notes').value = data.notes || '';
-        document.getElementById('whatsapp_enable').checked = data.whatsappEnabled || false;
+
+        // Canale Notifica
+        const channelSelect = document.getElementById('notif_channel_select');
+        if (channelSelect) {
+            channelSelect.value = data.notificationChannel || 'email';
+            channelSelect.dispatchEvent(new Event('change'));
+            // Sync proxy dropdown manually since we changed native value
+            syncCustomDropdowns();
+        }
+
+        // Destinatari Push
+        if (data.pushRecipients && Array.isArray(data.pushRecipients)) {
+            selectedPushRecipients = data.pushRecipients.map(email => ({ email, label: email }));
+            updatePushChips();
+            syncNativePushSelect();
+        }
 
         // Notifiche
         document.getElementById('notif_days_before').value = data.notificationDaysBefore || 14;
diff --git a/Frontend/public/assets/js/modules/settings/impostazioni.js b/Frontend/public/assets/js/modules/settings/impostazioni.js
index 0fd9094..92b310c 100644
--- a/Frontend/public/assets/js/modules/settings/impostazioni.js
+++ b/Frontend/public/assets/js/modules/settings/impostazioni.js
@@ -184,6 +184,8 @@ function initSettingsEvents() {
 function setupToggles(data) {
     const t2fa = document.getElementById('2fa-toggle');
     const tFace = document.getElementById('face-id-toggle');
+    const tPush = document.getElementById('push-notify-toggle');
+    const tEmail = document.getElementById('email-notify-toggle');
 
     if (t2fa) {
         t2fa.checked = data.settings_2fa || false;
@@ -196,7 +198,7 @@ function setupToggles(data) {
                 }
             } catch (e) {
                 console.error("Error saving 2FA:", e);
-                t2fa.checked = !val; // Revert on error
+                t2fa.checked = !val;
                 showToast(t('error_config_save') || "Errore salvataggio", "error");
             }
         });
@@ -213,11 +215,45 @@ function setupToggles(data) {
                 }
             } catch (e) {
                 console.error("Error saving Biometric:", e);
-                tFace.checked = !val; // Revert on error
+                tFace.checked = !val;
                 showToast(t('error_config_save') || "Errore salvataggio", "error");
             }
         });
     }
+
+    if (tPush) {
+        tPush.checked = data.pref_push_enabled !== false; // Default true
+        tPush.addEventListener('change', async () => {
+            const val = tPush.checked;
+            try {
+                if (auth.currentUser) {
+                    await updateDoc(doc(db, "users", auth.currentUser.uid), { pref_push_enabled: val });
+                    showToast(val ? "Notifiche Push Attivate" : "Notifiche Push Disattivate");
+                }
+            } catch (e) {
+                console.error("Error saving Push Pref:", e);
+                tPush.checked = !val;
+                showToast("Errore salvataggio", "error");
+            }
+        });
+    }
+
+    if (tEmail) {
+        tEmail.checked = data.pref_email_enabled !== false; // Default true
+        tEmail.addEventListener('change', async () => {
+            const val = tEmail.checked;
+            try {
+                if (auth.currentUser) {
+                    await updateDoc(doc(db, "users", auth.currentUser.uid), { pref_email_enabled: val });
+                    showToast(val ? "Notifiche Email Attivate" : "Notifiche Email Disattivate");
+                }
+            } catch (e) {
+                console.error("Error saving Email Pref:", e);
+                tEmail.checked = !val;
+                showToast("Errore salvataggio", "error");
+            }
+        });
+    }
 }
 
 function setupThemeSelector() {
diff --git a/Frontend/public/assets/js/translations.js b/Frontend/public/assets/js/translations.js
index 9601f3a..56628b7 100644
--- a/Frontend/public/assets/js/translations.js
+++ b/Frontend/public/assets/js/translations.js
@@ -362,6 +362,19 @@ export const translations = {
         privacy_11_title: "11. Modifiche all'informativa",
         privacy_11_text: "Questa informativa pu√≤ essere aggiornata. In caso di modifiche rilevanti, l‚Äôutente verr√† informato tramite la pagina o avviso in app.",
         section_notifications_logic: "Logica Notifiche",
+        notifications_prefs: "Preferenze Notifiche",
+        pref_push_label: "Notifiche Push (Device)",
+        pref_push_desc: "Ricevi avvisi sul cellulare",
+        pref_email_label: "Notifiche Email",
+        pref_email_desc: "Ricevi avvisi via posta",
+        notification_channel: "Canale di Notifica",
+        select_channel: "Scegli canale...",
+        notif_both: "Entrambi (Push + Email)",
+        notif_push_only: "Solo Notifica Push (App)",
+        notif_email_only: "Solo Notifica Email",
+        push_recipients: "Utenti Registrati (Push)",
+        select_user: "Seleziona utente...",
+        in_app_only_warn: "Attenzione: senza scegliere un canale di notifica esterno (Push o Email), la scadenza sar√† visibile e utilizzabile solo all'interno dell'app. Vuoi procedere comunque?",
         logout_confirm: "Vuoi davvero uscire dal sistema?",
         logout_confirm_title: "Vuoi uscire?",
         logout_confirm_msg: "Dovrai effettuare nuovamente il login per accedere.",
@@ -634,6 +647,29 @@ export const translations = {
         section_attachments_title: "Allegati",
         section_notes: "Note",
         toast_copied: "Copiato negli appunti!",
+
+        // COMPANY MODIFICA
+        notes_attachments: "Note & Allegati",
+        pec_address: "Indirizzo PEC",
+        pec_address_placeholder: "email@pec.it",
+        referent_role: "Ruolo / Titolo",
+        referent_role_placeholder: "es. Amministratore",
+        address_placeholder: "Via / Piazza",
+        company_notes: "Note Aziendali",
+        company_notes_placeholder: "Dati aggiuntivi (Telefono, Fax, Note...)",
+        select_source: "Seleziona Sorgente",
+        camera: "Camera",
+        gallery: "Galleria",
+        document: "Documento",
+        no_attachments: "Nessun allegato caricato",
+        email_address: "Indirizzo Email",
+        email_address_placeholder: "codex@codex.it",
+        notes: "Note",
+        notes_placeholder: "Note aggiuntive...",
+        uploaded: "Caricato",
+        new: "Nuovo",
+        office_type_placeholder: "TIPO SEDE (ES. OPERATIVA)",
+        email_type_placeholder: "TIPO EMAIL (ES. ORDINI)"
     },
     en: {
         home: "Home",
@@ -909,7 +945,20 @@ export const translations = {
         privacy_10_text: "The app is not intended for minors under 16. Intentional collection of minors' data is not planned.",
         privacy_11_title: "11. Policy Changes",
         privacy_11_text: "This policy may be updated. In case of significant changes, users will be informed via this page or in-app notices.",
-        // SETTINGS - PRIVACY SHORT (SUMMARY)
+        notifications_prefs: "Notification Preferences",
+        pref_push_label: "Push Notifications (Device)",
+        pref_push_desc: "Receive alerts on your mobile",
+        pref_email_label: "Email Notifications",
+        pref_email_desc: "Receive alerts via email",
+        notification_channel: "Notification Channel",
+        select_channel: "Choose channel...",
+        notif_both: "Both (Push + Email)",
+        notif_push_only: "Push Notification Only (App)",
+        notif_email_only: "Email Notification Only",
+        push_recipients: "Registered Users (Push)",
+        select_user: "Select user...",
+        in_app_only_warn: "Warning: without choosing an external notification channel (Push or Email), the deadline will only be visible and usable within the app. Do you want to proceed anyway?",
+        logout_confirm: "Do you really want to log out?",
         privacy_short_title: "Privacy Policy (Summary)",
         privacy_short_intro: "This application ('App Codici Password') is designed to manage personal data and user-entered information (e.g., credentials, notes, passwords, attachments).",
         privacy_short_compliance: "Processing occurs in compliance with applicable privacy regulations (EU Reg. 2016/679 ‚Äì GDPR).",
@@ -1195,6 +1244,29 @@ export const translations = {
         section_attachments_title: "Attachments",
         section_notes: "Notes",
         toast_copied: "Copied to clipboard!",
+
+        // COMPANY MODIFICA
+        notes_attachments: "Notes & Attachments",
+        pec_address: "PEC Address",
+        pec_address_placeholder: "email@pec.it",
+        referent_role: "Role / Title",
+        referent_role_placeholder: "e.g. Administrator",
+        address_placeholder: "Street / Square",
+        company_notes: "Company Notes",
+        company_notes_placeholder: "Additional data (Phone, Fax, Notes...)",
+        select_source: "Select Source",
+        camera: "Camera",
+        gallery: "Gallery",
+        document: "Document",
+        no_attachments: "No attachments uploaded",
+        email_address: "Email Address",
+        email_address_placeholder: "codex@codex.it",
+        notes: "Notes",
+        notes_placeholder: "Additional notes...",
+        uploaded: "Uploaded",
+        new: "New",
+        office_type_placeholder: "OFFICE TYPE (E.G. OPERATIVE)",
+        email_type_placeholder: "EMAIL TYPE (E.G. ORDERS)"
     },
     es: {
         // GLOBAL
diff --git a/Frontend/public/dati_azienda.html b/Frontend/public/dati_azienda.html
index 296d0aa..3258a51 100644
--- a/Frontend/public/dati_azienda.html
+++ b/Frontend/public/dati_azienda.html
@@ -3,7 +3,7 @@
 
 <head>
     <meta http-equiv="Content-Security-Policy"
-        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com; style-src 'self' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
+        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com https://cdnjs.cloudflare.com 'sha256-vvt4KWwuNr51XfE5m+hzeNEGhiOfZzG97ccfqGsPwvE='; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
     <meta charset="utf-8" />
     <meta name="viewport"
         content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
@@ -86,7 +86,7 @@
                                 class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
                         </button>
 
-                        <div id="referente-container" class="mt-content hidden-content">
+                        <div id="referente-container" class="mt-content hidden">
                             <div class="glass-card">
                                 <div class="referent-header">
                                     <div class="referent-avatar-box">
@@ -105,7 +105,8 @@
                                 </div>
 
                                 <div class="glass-field-container">
-                                    <label class="view-label" data-t="whatsapp_number">Cellulare / WhatsApp</label>
+                                    <label class="view-label" for="referente-cellulare"
+                                        data-t="whatsapp_number">Cellulare / WhatsApp</label>
                                     <div class="detail-field-box border-glow">
                                         <span
                                             class="material-symbols-outlined icon-field-left opacity-low">smartphone</span>
@@ -153,7 +154,7 @@
 
                         <div class="glass-card flex-col-gap">
                             <div class="glass-field-container">
-                                <label class="view-label" data-t="phone">Telefono</label>
+                                <label class="view-label" for="telefono-azienda" data-t="phone">Telefono</label>
                                 <div class="detail-field-box border-glow">
                                     <span class="material-symbols-outlined icon-field-left opacity-low">call</span>
                                     <input id="telefono-azienda" readonly class="detail-field-input no-transform"
@@ -171,7 +172,7 @@
                             </div>
 
                             <div class="glass-field-container">
-                                <label class="view-label" data-t="fax">Fax</label>
+                                <label class="view-label" for="fax-azienda" data-t="fax">Fax</label>
                                 <div class="detail-field-box border-glow">
                                     <span class="material-symbols-outlined icon-field-left opacity-low">fax</span>
                                     <input id="fax-azienda" readonly class="detail-field-input no-transform" value="-">
@@ -202,7 +203,7 @@
                                     class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
                             </div>
                         </button>
-                        <div id="email-list-container" class="mt-content hidden-content">
+                        <div id="email-list-container" class="mt-content hidden">
                             <!-- Generato via JS -->
                         </div>
                     </section>
@@ -224,10 +225,10 @@
                             </div>
                         </button>
 
-                        <div id="fiscal-container" class="mt-content hidden-content">
+                        <div id="fiscal-container" class="mt-content hidden">
                             <div class="glass-card flex-col-gap">
                                 <div class="glass-field-container">
-                                    <label class="view-label" data-t="vat_number">Partita IVA</label>
+                                    <label class="view-label" for="piva" data-t="vat_number">Partita IVA</label>
                                     <div class="detail-field-box border-glow">
                                         <input id="piva" readonly class="detail-field-input" value="-">
                                         <div class="detail-field-actions">
@@ -240,7 +241,7 @@
                                 </div>
 
                                 <div class="glass-field-container">
-                                    <label class="view-label" data-t="sdi_code">Codice SDI</label>
+                                    <label class="view-label" for="codice-sdi" data-t="sdi_code">Codice SDI</label>
                                     <div class="detail-field-box border-glow">
                                         <input id="codice-sdi" readonly class="detail-field-input" value="-">
                                         <div class="detail-field-actions">
@@ -253,7 +254,8 @@
                                 </div>
 
                                 <div class="glass-field-container">
-                                    <label class="view-label" data-t="cciaa_number">CCIAA (Numero Iscrizione)</label>
+                                    <label class="view-label" for="cciaa" data-t="cciaa_number">CCIAA (Numero
+                                        Iscrizione)</label>
                                     <div class="detail-field-box border-glow">
                                         <input id="cciaa" readonly class="detail-field-input" value="-">
                                         <div class="detail-field-actions">
@@ -266,7 +268,8 @@
                                 </div>
 
                                 <div class="glass-field-container">
-                                    <label class="view-label" data-t="registration_date">Data Iscrizione</label>
+                                    <label class="view-label" for="data-iscrizione" data-t="registration_date">Data
+                                        Iscrizione</label>
                                     <div class="detail-field-box border-glow">
                                         <input id="data-iscrizione" readonly class="detail-field-input text-primary"
                                             value="-">
@@ -310,7 +313,7 @@
                                 class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
                         </button>
 
-                        <div id="allegati-container" class="mt-content hidden-content">
+                        <div id="allegati-container" class="mt-content hidden">
                             <div id="allegati-list" class="flex-col-gap-xs">
                                 <p class="no-attachments-text" data-t="no_attachments">Nessun allegato</p>
                             </div>
diff --git a/Frontend/public/impostazioni.html b/Frontend/public/impostazioni.html
index 7bec9a9..2f2474a 100644
--- a/Frontend/public/impostazioni.html
+++ b/Frontend/public/impostazioni.html
@@ -177,9 +177,71 @@
                     </button>
                 </div>
 
+                <!-- Preferenze Notifiche -->
+                <div class="settings-container mt-section">
+                    <h3 class="settings-desc" data-t="notifications_prefs">Preferenze Notifiche</h3>
+
+                    <div class="settings-item">
+                        <div class="row-layout">
+                            <div class="settings-icon-box icon-blue">
+                                <span class="material-symbols-outlined">notifications_active</span>
+                            </div>
+                            <div class="settings-item-info">
+                                <span class="settings-label" data-t="pref_push_label">Notifiche Push (Device)</span>
+                                <span class="settings-desc" data-t="pref_push_desc">Ricevi avvisi sul cellulare</span>
+                            </div>
+                        </div>
+                        <input type="checkbox" id="push-notify-toggle" class="settings-toggle">
+                    </div>
+
+                    <div class="settings-item">
+                        <div class="row-layout">
+                            <div class="settings-icon-box icon-emerald">
+                                <span class="material-symbols-outlined">mail</span>
+                            </div>
+                            <div class="settings-item-info">
+                                <span class="settings-label" data-t="pref_email_label">Notifiche Email</span>
+                                <span class="settings-desc" data-t="pref_email_desc">Ricevi avvisi via posta</span>
+                            </div>
+                        </div>
+                        <input type="checkbox" id="email-notify-toggle" class="settings-toggle">
+                    </div>
+                </div>
+
+                <!-- Preferenze Notifiche -->
+                <div class="settings-container mt-section">
+                    <h3 class="settings-desc" data-t="notifications_prefs">Preferenze Notifiche</h3>
+
+                    <div class="settings-item">
+                        <div class="row-layout">
+                            <div class="settings-icon-box icon-blue">
+                                <span class="material-symbols-outlined">notifications_active</span>
+                            </div>
+                            <div class="settings-item-info">
+                                <span class="settings-label" data-t="pref_push_label">Notifiche Push (Device)</span>
+                                <span class="settings-desc" data-t="pref_push_desc">Ricevi avvisi sul cellulare</span>
+                            </div>
+                        </div>
+                        <input type="checkbox" id="push-notify-toggle" class="settings-toggle">
+                    </div>
+
+                    <div class="settings-item">
+                        <div class="row-layout">
+                            <div class="settings-icon-box icon-emerald">
+                                <span class="material-symbols-outlined">mail</span>
+                            </div>
+                            <div class="settings-item-info">
+                                <span class="settings-label" data-t="pref_email_label">Notifiche Email</span>
+                                <span class="settings-desc" data-t="pref_email_desc">Ricevi avvisi via posta</span>
+                            </div>
+                        </div>
+                        <input type="checkbox" id="email-notify-toggle" class="settings-toggle">
+                    </div>
+                </div>
+
                 <!-- Sicurezza e Accesso -->
                 <div class="settings-container mt-section">
-                    <h3 class="settings-desc" data-t="section_security">Sicurezza e Accesso</h3>
+                    <h3 class="settings-desc" data-t="section_security">Sicurezza e Accesso (Face ID, 2FA)</h3>
 
                     <!-- Password -->
                     <button class="settings-item group" id="btn-change-password">
diff --git a/Frontend/public/modifica_azienda.html b/Frontend/public/modifica_azienda.html
index dfc347f..b0310de 100644
--- a/Frontend/public/modifica_azienda.html
+++ b/Frontend/public/modifica_azienda.html
@@ -1,9 +1,9 @@
 <!DOCTYPE html>
-<html lang="it">
+<html lang="it" data-i18n="loading">
 
 <head>
     <meta http-equiv="Content-Security-Policy"
-        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com; style-src 'self' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
+        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com https://cdnjs.cloudflare.com 'sha256-vvt4KWwuNr51XfE5m+hzeNEGhiOfZzG97ccfqGsPwvE='; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
     <meta charset="utf-8" />
     <meta name="viewport"
         content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
@@ -38,6 +38,16 @@
         <main class="base-main">
             <div class="page-container pt-header-extra pb-footer-extra">
                 <div class="detail-content-wrap">
+                    <!-- üõ°Ô∏è Trappola Anti-autofill (V6.1.0 Hardened) -->
+                    <form aria-hidden="true" autocomplete="off" class="anti-autofill-trap"
+                        style="position: absolute; left: -9999px;">
+                        <label for="trap_entry_01">Indirizzo Email Fittizio</label>
+                        <input id="trap_entry_01" name="trap_entry_01" type="text" tabindex="-1"
+                            autocomplete="username">
+                        <label for="trap_secret_01">Password Fittizia</label>
+                        <input id="trap_secret_01" name="trap_secret_01" type="password" tabindex="-1"
+                            autocomplete="current-password">
+                    </form>
 
                     <div class="hero-profile-header">
                         <div class="header-action-row">
@@ -52,7 +62,9 @@
                                         <span class="material-symbols-outlined icon-tiny">edit</span>
                                     </div>
                                 </div>
-                                <input type="file" id="logo-upload" accept="image/*" class="hidden" />
+                                <label for="logo-upload" class="sr-only">Logo Azienda</label>
+                                <input type="file" id="logo-upload" name="logo-upload" accept="image/*" class="hidden"
+                                    aria-label="Carica Logo Azienda" />
                                 <div class="hero-status-dot">
                                     <span class="material-symbols-outlined icon-small">business</span>
                                 </div>
@@ -67,373 +79,692 @@
                                 <div class="detail-section-title-wrapper">
                                     <span
                                         class="material-symbols-outlined detail-section-icon icon-accent-blue">info</span>
-                                    <h3 class="detail-section-title">Anagrafica Principale</h3>
+                                    <h3 class="detail-section-title" data-t="company_info">Anagrafica Principale</h3>
                                 </div>
-                                <span class="section-badge-mandatory">Obbligatorio</span>
+                                <span class="section-badge-mandatory" data-t="mandatory">Obbligatorio</span>
                             </div>
 
                             <div class="glass-card">
+                                <!-- Ragione Sociale -->
                                 <div class="glass-field-container">
-                                    <label class="view-label" for="ragione-sociale">Ragione Sociale</label>
+                                    <label class="view-label" for="ragione-sociale" data-t="company_name">Ragione
+                                        Sociale</label>
                                     <div class="detail-field-box border-glow">
                                         <span class="material-symbols-outlined icon-field-left">business</span>
-                                        <input id="ragione-sociale" type="text" class="detail-field-input"
-                                            placeholder="Ragione Sociale" />
+                                        <input id="ragione-sociale" name="ragione_sociale_master" type="text"
+                                            class="detail-field-input" placeholder="Ragione Sociale"
+                                            data-t-placeholder="company_name" autocomplete="new-password"
+                                            autocorrect="off" spellcheck="false" />
                                         <div class="field-action-qr">
-                                            <input type="checkbox" data-qr-field="ragioneSociale" title="Includi in QR"
+                                            <input id="qr-ragione-sociale" name="qr-ragione-sociale" type="checkbox"
+                                                data-qr-field="ragioneSociale" title="Includi in QR"
                                                 aria-label="Includi Ragione Sociale nel QR" class="checkbox-qr"
                                                 checked />
+                                            <label for="qr-ragione-sociale" class="sr-only">Includi Ragione Sociale nel
+                                                QR</label>
                                         </div>
                                     </div>
                                 </div>
 
-                                <div class="form-grid-responsive">
+                                <div class="form-grid-2 mt-4">
+                                    <!-- Telefono -->
                                     <div class="glass-field-container">
-                                        <label class="view-label" for="piva">Partita IVA</label>
+                                        <label class="view-label" for="telefono-azienda" data-t="phone">Telefono</label>
                                         <div class="detail-field-box border-glow">
-                                            <span class="material-symbols-outlined icon-field-left">tag</span>
-                                            <input id="piva" type="tel" class="detail-field-input"
-                                                placeholder="Partita IVA" />
-                                            <div class="field-action-qr">
-                                                <input type="checkbox" data-qr-field="partitaIva" title="Includi in QR"
-                                                    aria-label="Includi Partita IVA nel QR" class="checkbox-qr"
-                                                    checked />
-                                            </div>
+                                            <span class="material-symbols-outlined icon-field-left">call</span>
+                                            <input id="telefono-azienda" name="company_phone" type="tel"
+                                                class="detail-field-input" placeholder="Telefono"
+                                                data-t-placeholder="phone" autocomplete="new-password" />
                                         </div>
                                     </div>
-
+                                    <!-- Fax -->
                                     <div class="glass-field-container">
-                                        <label class="view-label" for="codice-sdi">Codice SDI</label>
+                                        <label class="view-label" for="fax-azienda" data-t="fax">Fax</label>
                                         <div class="detail-field-box border-glow">
-                                            <span class="material-symbols-outlined icon-field-left">qr_code</span>
-                                            <input id="codice-sdi" type="text"
-                                                class="detail-field-input uppercase tracking-widest"
-                                                placeholder="Codice SDI" maxlength="7" />
-                                            <div class="field-action-qr">
-                                                <input type="checkbox" data-qr-field="codiceSDI" title="Includi in QR"
-                                                    aria-label="Includi Codice SDI nel QR" class="checkbox-qr"
-                                                    checked />
-                                            </div>
+                                            <span class="material-symbols-outlined icon-field-left">fax</span>
+                                            <input id="fax-azienda" name="company_fax" type="tel"
+                                                class="detail-field-input" placeholder="Fax" data-t-placeholder="fax"
+                                                autocomplete="new-password" />
                                         </div>
                                     </div>
                                 </div>
-
                             </div>
                         </section>
 
-                        <!-- 2. Referente Aziendale -->
+                        <!-- 1b. Dati Fiscali (Collapsible) -->
                         <section class="detail-section">
-                            <div class="detail-section-header">
-                                <span
-                                    class="material-symbols-outlined detail-section-icon icon-accent-emerald">person</span>
-                                <h3 class="detail-section-title">Referente Aziendale</h3>
-                            </div>
-
-                            <div class="glass-card">
-                                <div class="referent-header">
-                                    <div id="btn-trigger-ref-photo" class="referent-avatar-box group">
-                                        <img id="referente-photo-preview" class="detail-avatar-img hidden rounded-full"
-                                            src="" alt="Referente Preview" />
-                                        <span id="referente-photo-placeholder"
-                                            class="material-symbols-outlined icon-large opacity-placeholder">person</span>
-                                        <div class="qr-zoom-indicator">
-                                            <span class="material-symbols-outlined icon-tiny">edit</span>
-                                        </div>
-                                    </div>
-                                    <input type="file" id="referente-photo-upload" accept="image/*" class="hidden" />
-                                    <div class="flex-1">
-                                        <div class="glass-field-container">
-                                            <label class="view-label" for="referente-titolo">Ruolo / Titolo</label>
-                                            <div class="detail-field-box border-glow">
-                                                <span class="material-symbols-outlined icon-field-left">badge</span>
-                                                <input id="referente-titolo" type="text" class="detail-field-input"
-                                                    placeholder="es. Amministratore" />
-                                                <div class="field-action-qr">
-                                                    <input type="checkbox" data-qr-field="referenteTitolo"
-                                                        aria-label="Includi Ruolo nel QR" class="checkbox-qr" checked />
-                                                </div>
-                                            </div>
-                                        </div>
-                                    </div>
-                                </div>
-
-                                <div class="form-grid-2">
-                                    <div class="glass-field-container">
-                                        <label class="view-label" for="referente-nome">Nome</label>
-                                        <div class="detail-field-box border-glow">
-                                            <input id="referente-nome" type="text" class="detail-field-input"
-                                                placeholder="Nome" />
-                                            <div class="field-action-qr">
-                                                <input type="checkbox" data-qr-field="referenteNome"
-                                                    aria-label="Includi Nome nel QR" class="checkbox-qr" checked />
-                                            </div>
-                                        </div>
-                                    </div>
-                                    <div class="glass-field-container">
-                                        <label class="view-label" for="referente-cognome">Cognome</label>
-                                        <div class="detail-field-box border-glow">
-                                            <input id="referente-cognome" type="text" class="detail-field-input"
-                                                placeholder="Cognome" />
-                                            <div class="field-action-qr">
-                                                <input type="checkbox" data-qr-field="referenteCognome"
-                                                    aria-label="Includi Cognome nel QR" class="checkbox-qr" checked />
-                                            </div>
-                                        </div>
+                            <div class="glass-card section-fiscal-container">
+                                <button type="button" id="btn-toggle-fiscal"
+                                    class="accordion-trigger-premium group btn-toggle-section"
+                                    data-target="section-fiscal-main">
+                                    <div class="detail-section-title-wrapper">
+                                        <span
+                                            class="material-symbols-outlined detail-section-icon icon-accent-amber">payments</span>
+                                        <h3 class="detail-section-title" data-t="fiscal_data">Dati Fiscali</h3>
                                     </div>
-                                </div>
-
-                                <div class="glass-field-container">
-                                    <label class="view-label" for="referente-cellulare">Cellulare / WhatsApp</label>
-                                    <div class="detail-field-box border-glow">
-                                        <span class="material-symbols-outlined icon-field-left">smartphone</span>
-                                        <input id="referente-cellulare" type="tel" class="detail-field-input"
-                                            placeholder="Cellulare" />
-                                        <div class="field-action-qr">
-                                            <input type="checkbox" data-qr-field="referenteCellulare"
-                                                aria-label="Includi Cellulare nel QR" class="checkbox-qr" checked />
-                                        </div>
-                                    </div>
-                                </div>
-                            </div>
-                        </section>
-
-                        <!-- 3. Sedi & Localizzazioni -->
-                        <section class="detail-section">
-                            <div class="detail-section-header">
-                                <div class="detail-section-title-wrapper">
-                                    <span
-                                        class="material-symbols-outlined detail-section-icon icon-accent-blue">location_on</span>
-                                    <h3 class="detail-section-title">Sedi & Localizzazioni</h3>
-                                </div>
-                                <button type="button" id="btn-add-sede" class="btn-mini-add">
-                                    <span class="material-symbols-outlined icon-medium">add</span>
+                                    <span id="arrow-section-fiscal-main"
+                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
                                 </button>
-                            </div>
 
-                            <div class="flex-col-gap mt-content">
-                                <!-- Sede Legale (Always present) -->
-                                <div class="glass-card section-legal-container">
-                                    <button class="accordion-trigger-premium group btn-toggle-section"
-                                        data-target="section-legale">
-                                        <div class="detail-section-title-wrapper">
-                                            <span class="material-symbols-outlined icon-accent-blue">gavel</span>
-                                            <span class="detail-section-title">Sede Legale</span>
-                                            <div class="field-action-qr opacity-40">
-                                                <input type="checkbox" data-qr-field="qrLegale" class="checkbox-qr"
-                                                    checked data-stop-propagation
-                                                    aria-label="Includi Sede Legale nel QR" />
-                                            </div>
-                                        </div>
-                                        <span id="arrow-section-legale"
-                                            class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
-                                    </button>
-                                    <div id="section-legale" class="collapsible-section hidden-content">
+                                <div id="section-fiscal-main" class="collapsible-section hidden-content"
+                                    style="max-height: 0px; overflow: hidden;">
+                                    <div class="flex-col-gap mt-content p-4">
                                         <div class="form-grid-responsive">
                                             <div class="glass-field-container">
-                                                <label class="view-label" for="indirizzo">Indirizzo</label>
+                                                <label class="view-label" for="piva" data-t="vat_number">Partita
+                                                    IVA</label>
                                                 <div class="detail-field-box border-glow">
-                                                    <input id="indirizzo" type="text" class="detail-field-input"
-                                                        placeholder="Via / Piazza" />
-                                                </div>
-                                            </div>
-                                            <div class="glass-field-container">
-                                                <label class="view-label" for="civico">N.</label>
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="civico" type="text"
-                                                        class="detail-field-input text-center" placeholder="Civico" />
-                                                </div>
-                                            </div>
-                                        </div>
-                                        <div class="form-grid-3">
-                                            <div class="glass-field-container">
-                                                <label class="view-label" for="citta">Citt√†</label>
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="citta" type="text" class="detail-field-input"
-                                                        placeholder="Citt√†" />
-                                                </div>
-                                            </div>
-                                            <div class="glass-field-container">
-                                                <label class="view-label" for="provincia">Prov</label>
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="provincia" type="text"
-                                                        class="detail-field-input text-center uppercase"
-                                                        placeholder="PR" maxlength="2" />
+                                                    <span class="material-symbols-outlined icon-field-left">tag</span>
+                                                    <input id="piva" name="company_vat_master" type="tel"
+                                                        class="detail-field-input" placeholder="Partita IVA"
+                                                        data-t-placeholder="vat_number" autocomplete="new-password"
+                                                        autocorrect="off" spellcheck="false" />
+                                                    <div class="field-action-qr">
+                                                        <input id="qr-partita-iva" name="qr-partita-iva" type="checkbox"
+                                                            data-qr-field="partitaIva" title="Includi in QR"
+                                                            aria-label="Includi Partita IVA nel QR" class="checkbox-qr"
+                                                            checked />
+                                                        <label for="qr-partita-iva" class="sr-only">Includi Partita IVA
+                                                            nel QR</label>
+                                                    </div>
                                                 </div>
                                             </div>
+
                                             <div class="glass-field-container">
-                                                <label class="view-label" for="cap">CAP</label>
+                                                <label class="view-label" for="codice-sdi" data-t="sdi_code">Codice
+                                                    SDI</label>
                                                 <div class="detail-field-box border-glow">
-                                                    <input id="cap" type="tel" class="detail-field-input text-center"
-                                                        placeholder="CAP" maxlength="5" />
+                                                    <span
+                                                        class="material-symbols-outlined icon-field-left">qr_code</span>
+                                                    <input id="codice-sdi" name="company_sdi_master" type="text"
+                                                        class="detail-field-input uppercase tracking-widest"
+                                                        placeholder="Codice SDI" data-t-placeholder="sdi_code"
+                                                        autocomplete="new-password" autocorrect="off" spellcheck="false"
+                                                        maxlength="7" />
+                                                    <div class="field-action-qr">
+                                                        <input id="qr-sdicodici" name="qr-sdicodici" type="checkbox"
+                                                            data-qr-field="codiceSDI" title="Includi in QR"
+                                                            aria-label="Includi Codice SDI nel QR" class="checkbox-qr"
+                                                            checked />
+                                                        <label for="qr-sdicodici" class="sr-only">Includi Codice SDI nel
+                                                            QR</label>
+                                                    </div>
                                                 </div>
                                             </div>
                                         </div>
-                                        <div class="form-grid-2">
+
+                                        <div class="form-grid-responsive">
                                             <div class="glass-field-container">
-                                                <label class="view-label" for="numero-cciaa">CCIAA</label>
+                                                <label class="view-label" for="numero-cciaa"
+                                                    data-t="cciaa_number">CCIAA</label>
                                                 <div class="detail-field-box border-glow">
-                                                    <input id="numero-cciaa" type="text" class="detail-field-input"
-                                                        placeholder="REA..." />
+                                                    <span
+                                                        class="material-symbols-outlined icon-field-left">fact_check</span>
+                                                    <input id="numero-cciaa" name="office_cciaa_master" type="text"
+                                                        class="detail-field-input" placeholder="REA..."
+                                                        data-t-placeholder="cciaa_placeholder"
+                                                        autocomplete="new-password" autocorrect="off"
+                                                        spellcheck="false" />
                                                     <div class="field-action-qr">
-                                                        <input type="checkbox" data-qr-field="numeroCCIAA"
+                                                        <input id="qr-cciaa" name="qr-cciaa" type="checkbox"
+                                                            data-qr-field="numeroCCIAA"
                                                             aria-label="Includi Numero CCIAA nel QR" class="checkbox-qr"
                                                             checked />
+                                                        <label for="qr-cciaa" class="sr-only">Includi CCIAA nel
+                                                            QR</label>
                                                     </div>
                                                 </div>
                                             </div>
                                             <div class="glass-field-container">
-                                                <label class="view-label" for="data-iscrizione">Data Iscrizione</label>
+                                                <label class="view-label" for="data-iscrizione"
+                                                    data-t="registration_date">Data Iscrizione</label>
                                                 <div class="detail-field-box border-glow">
-                                                    <input id="data-iscrizione" type="date"
+                                                    <span
+                                                        class="material-symbols-outlined icon-field-left">calendar_month</span>
+                                                    <input id="data-iscrizione" name="data-iscrizione" type="date"
                                                         class="detail-field-input" />
                                                     <div class="field-action-qr">
-                                                        <input type="checkbox" data-qr-field="dataIscrizione"
+                                                        <input id="qr-data-iscr" name="qr-data-iscr" type="checkbox"
+                                                            data-qr-field="dataIscrizione"
                                                             aria-label="Includi Data Iscrizione nel QR"
                                                             class="checkbox-qr" checked />
+                                                        <label for="qr-data-iscr" class="sr-only">Includi Data
+                                                            Iscrizione nel QR</label>
                                                     </div>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
-
-                                <!-- Dynamic Sedi Container -->
-                                <div id="altre-sedi-container" class="altre-sedi-wrap">
-                                    <!-- Dynamic Content Here -->
-                                </div>
-                            </div>
                         </section>
 
-                        <!-- 4. Email Aziendali -->
+                        <!-- 2. Referente Aziendale -->
+                        <!-- 2. Referente (Collapsible) -->
                         <section class="detail-section">
-                            <div class="detail-section-header">
-                                <span
-                                    class="material-symbols-outlined detail-section-icon icon-accent-emerald">mail</span>
-                                <h3 class="detail-section-title">Email & PEC</h3>
-                            </div>
+                            <div class="glass-card section-referent-container">
+                                <button type="button" id="btn-toggle-referent"
+                                    class="accordion-trigger-premium group btn-toggle-section"
+                                    data-target="section-referente-main">
+                                    <div class="detail-section-title-wrapper">
+                                        <span
+                                            class="material-symbols-outlined detail-section-icon icon-accent-emerald">person</span>
+                                        <h3 class="detail-section-title" data-t="company_referent">Referente Aziendale
+                                        </h3>
+                                    </div>
+                                    <span id="arrow-section-referente-main"
+                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
+                                </button>
 
-                            <div class="glass-card">
-                                <div id="section-email" class="flex-col-gap">
-                                    <!-- PEC -->
-                                    <div class="glass-card inside-card">
-                                        <div class="detail-section-header">
-                                            <span class="detail-section-title text-emerald-400">PEC Aziendale</span>
-                                            <div class="field-action-qr opacity-40">
-                                                <input type="checkbox" data-qr-field="aziendaEmail"
-                                                    aria-label="Includi PEC nel QR" class="checkbox-qr" checked />
+                                <div id="section-referente-main" class="collapsible-section hidden-content"
+                                    style="max-height: 0px; overflow: hidden;">
+                                    <div class="referent-header">
+                                        <div id="btn-trigger-ref-photo" class="referent-avatar-box group">
+                                            <img id="referente-photo-preview"
+                                                class="detail-avatar-img hidden rounded-full" src=""
+                                                alt="Referente Preview" />
+                                            <span id="referente-photo-placeholder"
+                                                class="material-symbols-outlined icon-large opacity-placeholder">person</span>
+                                            <div class="qr-zoom-indicator">
+                                                <span class="material-symbols-outlined icon-tiny">edit</span>
                                             </div>
                                         </div>
-                                        <div class="flex-col-gap">
+                                        <label for="referente-photo-upload" class="sr-only">Foto Referente</label>
+                                        <input type="file" id="referente-photo-upload" name="referente-photo-upload"
+                                            accept="image/*" class="hidden" aria-label="Carica Foto Referente" />
+                                        <div class="flex-1">
                                             <div class="glass-field-container">
-                                                <label class="view-label" for="email-pec">Indirizzo PEC</label>
+                                                <label class="view-label" for="referente-titolo"
+                                                    data-t="referent_role">Ruolo / Titolo</label>
                                                 <div class="detail-field-box border-glow">
-                                                    <input id="email-pec" type="email" class="detail-field-input"
-                                                        placeholder="email@pec.it" />
+                                                    <span class="material-symbols-outlined icon-field-left">badge</span>
+                                                    <input id="referente-titolo" name="ref_role_master" type="text"
+                                                        class="detail-field-input" placeholder="es. Amministratore"
+                                                        data-t-placeholder="referent_role_placeholder"
+                                                        autocomplete="new-password" autocorrect="off"
+                                                        spellcheck="false" />
+                                                    <div class="field-action-qr">
+                                                        <input id="qr-referente-titolo" name="qr-referente-titolo"
+                                                            type="checkbox" data-qr-field="referenteTitolo"
+                                                            aria-label="Includi Ruolo nel QR" class="checkbox-qr"
+                                                            checked />
+                                                        <label for="qr-referente-titolo" class="sr-only">Includi Ruolo
+                                                            nel QR</label>
+                                                    </div>
                                                 </div>
                                             </div>
-                                            <div class="glass-field-container">
-                                                <label class="view-label" for="email-pec-password">Password PEC</label>
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="email-pec-password" type="text"
-                                                        class="detail-field-input base-shield"
-                                                        placeholder="Password PEC" />
-                                                    <div class="detail-field-actions">
-                                                        <button class="btn-toggle-pass btn-icon-header"
-                                                            data-target="email-pec-password">
-                                                            <span class="material-symbols-outlined">visibility</span>
-                                                        </button>
-                                                    </div>
+                                        </div>
+                                    </div>
+
+                                    <div class="form-grid-2">
+                                        <div class="glass-field-container">
+                                            <label class="view-label" for="referente-nome"
+                                                data-t="first_name">Nome</label>
+                                            <div class="detail-field-box border-glow">
+                                                <input id="referente-nome" name="ref_fn_master" type="text"
+                                                    class="detail-field-input" placeholder="Nome"
+                                                    data-t-placeholder="first_name" autocomplete="new-password"
+                                                    autocorrect="off" spellcheck="false" />
+                                                <div class="field-action-qr">
+                                                    <input id="qr-referente-nome" name="qr-referente-nome"
+                                                        type="checkbox" data-qr-field="referenteNome"
+                                                        aria-label="Includi Nome nel QR" class="checkbox-qr" checked />
+                                                    <label for="qr-referente-nome" class="sr-only">Includi Nome nel
+                                                        QR</label>
                                                 </div>
                                             </div>
-                                            <div class="glass-field-container">
-                                                <label class="view-label" for="email-pec-note">Note Accesso</label>
-                                                <div class="detail-field-box border-glow note-box">
-                                                    <textarea id="email-pec-note" class="form-textarea"
-                                                        placeholder="Note accesso PEC..."></textarea>
+                                        </div>
+                                        <div class="glass-field-container">
+                                            <label class="view-label" for="referente-cognome"
+                                                data-t="last_name">Cognome</label>
+                                            <div class="detail-field-box border-glow">
+                                                <input id="referente-cognome" name="ref_ln_master" type="text"
+                                                    class="detail-field-input" placeholder="Cognome"
+                                                    data-t-placeholder="last_name" autocomplete="new-password"
+                                                    autocorrect="off" spellcheck="false" />
+                                                <div class="field-action-qr">
+                                                    <input id="qr-referente-cognome" name="qr-referente-cognome"
+                                                        type="checkbox" data-qr-field="referenteCognome"
+                                                        aria-label="Includi Cognome nel QR" class="checkbox-qr"
+                                                        checked />
+                                                    <label for="qr-referente-cognome" class="sr-only">Includi Cognome
+                                                        nel
+                                                        QR</label>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
 
-                                    <!-- Grid Other Emails -->
+                                    <div class="glass-field-container">
+                                        <label class="view-label" for="referente-cellulare" data-t="phone">Cellulare /
+                                            WhatsApp</label>
+                                        <div class="detail-field-box border-glow">
+                                            <span class="material-symbols-outlined icon-field-left">smartphone</span>
+                                            <input id="referente-cellulare" name="ref_tel_master" type="tel"
+                                                class="detail-field-input" placeholder="Cellulare"
+                                                data-t-placeholder="phone" autocomplete="new-password" autocorrect="off"
+                                                spellcheck="false" />
+                                            <div class="field-action-qr">
+                                                <input id="qr-referente-cellulare" name="qr-referente-cellulare"
+                                                    type="checkbox" data-qr-field="referenteCellulare"
+                                                    aria-label="Includi Cellulare nel QR" class="checkbox-qr" checked />
+                                                <label for="qr-referente-cellulare" class="sr-only">Includi Cellulare
+                                                    nel
+                                                    QR</label>
+                                            </div>
+                                        </div>
+                                    </div>
+                                </div>
+                            </div>
+                        </section>
+
+                        <!-- 3. Sedi & Localizzazioni (Collapsible) -->
+                        <section class="detail-section">
+                            <div class="glass-card section-locations-container">
+                                <button type="button" id="btn-toggle-locations"
+                                    class="accordion-trigger-premium group btn-toggle-section"
+                                    data-target="section-locations-main">
+                                    <div class="detail-section-title-wrapper">
+                                        <span
+                                            class="material-symbols-outlined detail-section-icon icon-accent-blue">location_on</span>
+                                        <h3 class="detail-section-title" data-t="company_locations">Sedi &
+                                            Localizzazioni
+                                        </h3>
+                                    </div>
+                                    <span id="arrow-section-locations-main"
+                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
+                                </button>
+
+                                <div id="section-locations-main" class="collapsible-section hidden-content"
+                                    style="max-height: 0px; overflow: hidden;">
                                     <div class="flex-col-gap">
+                                        <!-- Sede Legale (Always present) -->
                                         <div class="glass-card inside-card">
-                                            <span class="detail-section-title text-blue-400">Amministrazione</span>
-                                            <div class="glass-field-container">
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="email-amministrazione" type="email"
-                                                        class="detail-field-input" aria-label="Email Amministrazione"
-                                                        placeholder="Email Amministrazione" />
+                                            <div class="email-card-header btn-toggle-section"
+                                                data-target="section-legale">
+                                                <div class="flex items-center gap-3 flex-1">
+                                                    <span
+                                                        class="material-symbols-outlined icon-accent-blue">gavel</span>
+                                                    <input id="tipo-sede-legale" name="legale_type_master" type="text"
+                                                        class="email-type-input text-blue-400" placeholder="Sede Legale"
+                                                        value="Sede Legale" data-stop-propagation />
+                                                </div>
+                                                <div class="email-actions-group">
+                                                    <div class="field-action-qr opacity-40">
+                                                        <input id="qr-sede-legale" name="qr-sede-legale" type="checkbox"
+                                                            data-qr-field="qrLegale" class="checkbox-qr" checked
+                                                            data-stop-propagation
+                                                            aria-label="Includi Sede Legale nel QR" />
+                                                        <label for="qr-sede-legale" class="sr-only">QR</label>
+                                                    </div>
+                                                    <span id="arrow-section-legale"
+                                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
                                                 </div>
                                             </div>
-                                            <div class="glass-field-container">
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="email-amministrazione-password" type="text"
-                                                        aria-label="Password Amministrazione"
-                                                        class="detail-field-input base-shield"
-                                                        placeholder="Password Amministrazione" />
+                                            <div id="section-legale" class="email-card-body collapsible-section">
+                                                <div
+                                                    style="display: grid; grid-template-columns: 1fr 80px; gap: 0.75rem;">
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="indirizzo"
+                                                            data-t="address">Indirizzo</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="indirizzo" name="office_addr_master" type="text"
+                                                                class="detail-field-input" placeholder="Via / Piazza"
+                                                                data-t-placeholder="address_placeholder"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="civico"
+                                                            data-t="civic_number">N.</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="civico" name="office_civic_master" type="text"
+                                                                class="detail-field-input text-center"
+                                                                placeholder="Civico" data-t-placeholder="civic_number"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                                <div class="form-grid-3">
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="citta"
+                                                            data-t="city">Citt√†</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="citta" name="office_city_master" type="text"
+                                                                class="detail-field-input" placeholder="Citt√†"
+                                                                data-t-placeholder="city" autocomplete="new-password"
+                                                                autocorrect="off" spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="provincia"
+                                                            data-t="province">Prov</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="provincia" name="office_prov_master" type="text"
+                                                                class="detail-field-input text-center uppercase"
+                                                                placeholder="PR" maxlength="2"
+                                                                data-t-placeholder="province_short"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="cap" data-t="cap">CAP</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="cap" name="office_zip_master" type="tel"
+                                                                class="detail-field-input text-center" placeholder="CAP"
+                                                                maxlength="5" data-t-placeholder="cap"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
                                                 </div>
                                             </div>
                                         </div>
 
+                                        <!-- Dynamic Sedi Container -->
+                                        <div id="altre-sedi-container" class="flex-col-gap mt-content"></div>
+
+                                        <button type="button" id="btn-add-sede" class="btn-add-circle mt-content">
+                                            <span class="material-symbols-outlined icon-medium">add_circle</span>
+                                            <span class="detail-section-title" data-t="add_location">Aggiungi Altra
+                                                Sede</span>
+                                        </button>
+                                    </div>
+                                </div>
+                            </div>
+                        </section>
+
+                        <!-- 4. Email Aziendali -->
+                        <section class="detail-section">
+                            <div class="glass-card section-emails-container">
+                                <button type="button" id="btn-toggle-emails"
+                                    class="accordion-trigger-premium group btn-toggle-section"
+                                    data-target="section-emails-main">
+                                    <div class="detail-section-title-wrapper">
+                                        <span
+                                            class="material-symbols-outlined detail-section-icon icon-accent-emerald">mail</span>
+                                        <h3 class="detail-section-title" data-t="emails_pec">Email & PEC</h3>
+                                    </div>
+                                    <span id="arrow-section-emails-main"
+                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
+                                </button>
+
+                                <div id="section-emails-main" class="collapsible-section hidden-content"
+                                    style="max-height: 0px; overflow: hidden;">
+                                    <div id="section-email" class="flex-col-gap">
+                                        <!-- PEC -->
                                         <div class="glass-card inside-card">
-                                            <span class="detail-section-title text-purple-400">Personale</span>
-                                            <div class="glass-field-container">
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="email-personale" type="email" class="detail-field-input"
-                                                        aria-label="Email Personale" placeholder="Email Personale" />
+                                            <div class="email-card-header btn-toggle-section" data-target="body-pec">
+                                                <input id="type-pec" name="type-pec" type="text"
+                                                    class="email-type-input text-emerald-400"
+                                                    placeholder="PEC Aziendale" value="PEC Aziendale"
+                                                    data-stop-propagation />
+                                                <div class="email-actions-group">
+                                                    <div class="field-action-qr opacity-40">
+                                                        <input id="qr-pec" name="qr-pec" type="checkbox"
+                                                            data-qr-field="aziendaEmail" aria-label="Includi PEC nel QR"
+                                                            class="checkbox-qr" checked data-stop-propagation />
+                                                        <label for="qr-pec" class="sr-only">Includi PEC nel
+                                                            QR</label>
+                                                    </div>
+                                                    <button type="button" class="btn-remove-item"
+                                                        onclick="this.closest('.inside-card').remove()"
+                                                        data-stop-propagation>
+                                                        <span class="material-symbols-outlined text-sm">delete</span>
+                                                    </button>
+                                                    <span id="arrow-body-pec"
+                                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
                                                 </div>
                                             </div>
-                                            <div class="glass-field-container">
-                                                <div class="detail-field-box border-glow">
-                                                    <input id="email-personale-password" type="text"
-                                                        aria-label="Password Personale"
-                                                        class="detail-field-input base-shield"
-                                                        placeholder="Password Personale" />
+                                            <div id="body-pec" class="email-card-body collapsible-section">
+                                                <div class="glass-field-container">
+                                                    <label class="view-label" for="email-pec"
+                                                        data-t="pec_address">Indirizzo
+                                                        PEC</label>
+                                                    <div class="detail-field-box border-glow">
+                                                        <input id="email-pec" name="pec_entry_master" type="email"
+                                                            class="detail-field-input" placeholder="email@pec.it"
+                                                            data-t-placeholder="pec_address_placeholder"
+                                                            autocomplete="new-password" autocorrect="off"
+                                                            spellcheck="false" />
+                                                    </div>
+                                                </div>
+                                                <div class="glass-field-container">
+                                                    <label class="view-label" for="email-pec-password"
+                                                        data-t="pec_password">Password
+                                                        PEC</label>
+                                                    <div class="detail-field-box border-glow">
+                                                        <input id="email-pec-password" name="pec_secret_master"
+                                                            type="text" class="detail-field-input base-shield"
+                                                            placeholder="Password PEC" data-t-placeholder="password"
+                                                            autocomplete="new-password" autocorrect="off"
+                                                            spellcheck="false" />
+                                                        <div class="detail-field-actions">
+                                                            <button type="button" id="btn-toggle-pec-pass"
+                                                                class="btn-toggle-pass btn-icon-header"
+                                                                data-target="email-pec-password">
+                                                                <span
+                                                                    class="material-symbols-outlined">visibility</span>
+                                                            </button>
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                                <div class="glass-field-container">
+                                                    <label class="view-label" for="email-pec-note" data-t="notes">Note
+                                                        Accesso</label>
+                                                    <div class="detail-field-box border-glow note-box">
+                                                        <textarea id="email-pec-note" name="pec_notes_master"
+                                                            class="form-textarea" placeholder="Note accesso PEC..."
+                                                            data-t-placeholder="notes_placeholder"
+                                                            autocomplete="new-password" autocorrect="off"
+                                                            spellcheck="false"></textarea>
+                                                    </div>
                                                 </div>
                                             </div>
                                         </div>
-                                    </div>
 
-                                    <!-- Extra Emails Container -->
-                                    <div id="email-extra-container" class="flex-col-gap"></div>
+                                        <!-- Grid Other Emails -->
+                                        <div class="flex-col-gap">
+                                            <div class="glass-card inside-card">
+                                                <div class="email-card-header btn-toggle-section"
+                                                    data-target="body-amministrazione">
+                                                    <input id="type-amministrazione" name="type-amministrazione"
+                                                        type="text" class="email-type-input text-blue-400"
+                                                        placeholder="Amministrazione" value="Amministrazione"
+                                                        data-stop-propagation />
+                                                    <div class="email-actions-group">
+                                                        <div class="field-action-qr opacity-40">
+                                                            <input id="qr-amministrazione" name="qr-amministrazione"
+                                                                type="checkbox" data-qr-field="adminEmail"
+                                                                aria-label="Includi Amministrazione nel QR"
+                                                                class="checkbox-qr" checked data-stop-propagation />
+                                                            <label for="qr-amministrazione" class="sr-only">Includi
+                                                                Amministrazione nel QR</label>
+                                                        </div>
+                                                        <button type="button" class="btn-remove-item"
+                                                            onclick="this.closest('.inside-card').remove()"
+                                                            data-stop-propagation>
+                                                            <span
+                                                                class="material-symbols-outlined text-sm">delete</span>
+                                                        </button>
+                                                        <span id="arrow-body-amministrazione"
+                                                            class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
+                                                    </div>
+                                                </div>
+                                                <div id="body-amministrazione"
+                                                    class="email-card-body collapsible-section">
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="email-amministrazione"
+                                                            data-t="email_address">Indirizzo Email</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="email-amministrazione" name="admin_entry_master"
+                                                                type="email" class="detail-field-input"
+                                                                placeholder="Email Amministrazione"
+                                                                data-t-placeholder="email_address"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="email-amministrazione-password"
+                                                            data-t="email_password">Password Email</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="email-amministrazione-password"
+                                                                name="admin_secret_master" type="text"
+                                                                class="detail-field-input base-shield"
+                                                                placeholder="Password Amministrazione"
+                                                                data-t-placeholder="password"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="email-amministrazione-note"
+                                                            data-t="notes">Note
+                                                            Accesso</label>
+                                                        <div class="detail-field-box border-glow note-box">
+                                                            <textarea id="email-amministrazione-note"
+                                                                name="admin_notes_master" class="form-textarea"
+                                                                placeholder="Note Amministrazione..."
+                                                                data-t-placeholder="notes_placeholder"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false"></textarea>
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                            </div>
+
+                                            <div class="glass-card inside-card">
+                                                <div class="email-card-header btn-toggle-section"
+                                                    data-target="body-personale">
+                                                    <input id="type-personale" name="type-personale" type="text"
+                                                        class="email-type-input text-purple-400" placeholder="Personale"
+                                                        value="Personale" data-stop-propagation />
+                                                    <div class="email-actions-group">
+                                                        <div class="field-action-qr opacity-40">
+                                                            <input id="qr-personale" name="qr-personale" type="checkbox"
+                                                                data-qr-field="persEmail"
+                                                                aria-label="Includi Personale nel QR"
+                                                                class="checkbox-qr" checked data-stop-propagation />
+                                                            <label for="qr-personale" class="sr-only">Includi
+                                                                Personale
+                                                                nel
+                                                                QR</label>
+                                                        </div>
+                                                        <button type="button" class="btn-remove-item"
+                                                            onclick="this.closest('.inside-card').remove()"
+                                                            data-stop-propagation>
+                                                            <span
+                                                                class="material-symbols-outlined text-sm">delete</span>
+                                                        </button>
+                                                        <span id="arrow-body-personale"
+                                                            class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
+                                                    </div>
+                                                </div>
+                                                <div id="body-personale" class="email-card-body collapsible-section">
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="email-personale"
+                                                            data-t="email_address">Indirizzo
+                                                            Email</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="email-personale" name="pers_entry_master"
+                                                                type="email" class="detail-field-input"
+                                                                placeholder="Email Personale"
+                                                                data-t-placeholder="email_address"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="email-personale-password"
+                                                            data-t="email_password">Password Email</label>
+                                                        <div class="detail-field-box border-glow">
+                                                            <input id="email-personale-password"
+                                                                name="pers_secret_master" type="text"
+                                                                class="detail-field-input base-shield"
+                                                                placeholder="Password Personale"
+                                                                data-t-placeholder="password"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false" />
+                                                        </div>
+                                                    </div>
+                                                    <div class="glass-field-container">
+                                                        <label class="view-label" for="email-personale-note"
+                                                            data-t="notes">Note
+                                                            Accesso</label>
+                                                        <div class="detail-field-box border-glow note-box">
+                                                            <textarea id="email-personale-note" name="pers_notes_master"
+                                                                class="form-textarea" placeholder="Note Personale..."
+                                                                data-t-placeholder="notes_placeholder"
+                                                                autocomplete="new-password" autocorrect="off"
+                                                                spellcheck="false"></textarea>
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                            </div>
+                                        </div>
 
-                                    <button type="button" id="btn-add-email"
-                                        class="detail-section-actions text-blue-400 font-bold uppercase pointer">
-                                        <span class="material-symbols-outlined icon-medium">add_circle</span>
-                                        <span>Aggiungi Email</span>
-                                    </button>
+                                        <!-- Extra Emails Container -->
+                                        <div id="email-extra-container" class="flex-col-gap"></div>
+
+                                        <button type="button" id="btn-add-email" class="btn-add-circle">
+                                            <span class="material-symbols-outlined icon-medium">add_circle</span>
+                                            <span class="detail-section-title" data-t="add_custom_email">Aggiungi
+                                                Email
+                                                Personalizzata</span>
+                                        </button>
+                                    </div>
                                 </div>
                             </div>
                         </section>
 
-                        <!-- 5. Note & Allegati -->
+                        <!-- 5. Note & Allegati (Collapsible) -->
                         <section class="detail-section mb-footer">
-                            <div class="detail-section-header">
-                                <span
-                                    class="material-symbols-outlined detail-section-icon icon-accent-amber">edit_note</span>
-                                <h3 class="detail-section-title">Note & Allegati</h3>
-                            </div>
-
-                            <div class="glass-card">
-                                <div class="glass-field-container">
-                                    <label class="view-label" for="note-azienda">Note Aziendali</label>
-                                    <div class="detail-field-box border-glow note-box">
-                                        <textarea id="note-azienda" class="form-textarea"
-                                            placeholder="Dati aggiuntivi (Telefono, Fax, Note...)"></textarea>
+                            <div class="glass-card section-notes-container">
+                                <button type="button" id="btn-toggle-notes"
+                                    class="accordion-trigger-premium group btn-toggle-section"
+                                    data-target="section-notes-main">
+                                    <div class="detail-section-title-wrapper">
+                                        <span
+                                            class="material-symbols-outlined detail-section-icon icon-accent-amber">edit_note</span>
+                                        <h3 class="detail-section-title" data-t="notes_attachments">Note & Allegati</h3>
                                     </div>
-                                </div>
+                                    <span id="arrow-section-notes-main"
+                                        class="material-symbols-outlined icon-chevron transition-transform">expand_more</span>
+                                </button>
 
-                                <div class="mt-content">
-                                    <div id="attachments-list" class="flex-col-gap">
-                                        <!-- Injected via JS -->
-                                        <p class="no-attachments-text">Nessun allegato caricato</p>
+                                <div id="section-notes-main" class="collapsible-section hidden-content"
+                                    style="max-height: 0px; overflow: hidden;">
+                                    <div class="glass-field-container">
+                                        <label class="view-label" for="note-azienda" data-t="company_notes">Note
+                                            Aziendali</label>
+                                        <div class="detail-field-box border-glow note-box">
+                                            <textarea id="note-azienda" name="company_notes_master"
+                                                class="form-textarea"
+                                                placeholder="Dati aggiuntivi (Telefono, Fax, Note...)"
+                                                data-t-placeholder="company_notes_placeholder"
+                                                autocomplete="new-password" autocorrect="off"
+                                                spellcheck="false"></textarea>
+                                        </div>
                                     </div>
 
-                                    <button type="button" id="btn-trigger-upload" class="btn-add-circle mt-content">
-                                        <span class="material-symbols-outlined icon-medium">add_circle</span>
-                                        <span class="detail-section-title">Aggiungi Documento o Foto</span>
-                                    </button>
+                                    <div class="mt-content">
+                                        <div id="attachments-list" class="flex-col-gap">
+                                            <!-- Injected via JS -->
+                                            <p class="no-attachments-text" data-t="no_attachments">Nessun allegato
+                                                caricato
+                                            </p>
+                                        </div>
+
+                                        <button type="button" id="btn-trigger-upload" class="btn-add-circle mt-content">
+                                            <span class="material-symbols-outlined icon-medium">add_circle</span>
+                                            <span class="detail-section-title" data-t="add_doc_photo">Aggiungi Documento
+                                                o
+                                                Foto</span>
+                                        </button>
+                                    </div>
                                 </div>
                             </div>
                         </section>
@@ -449,36 +780,41 @@
     </div>
 
     <!-- Hidden File Inputs -->
-    <input type="file" id="input-camera" accept="image/*" capture="environment" class="hidden"
+    <label for="input-camera" class="sr-only">Fotocamera</label>
+    <input type="file" id="input-camera" name="input-camera" accept="image/*" capture="environment" class="hidden"
         aria-label="Upload da Camera">
-    <input type="file" id="input-gallery" accept="image/*,video/*" class="hidden" aria-label="Upload da Galleria">
-    <input type="file" id="input-file" accept=".pdf,.doc,.docx,.xls,.xlsx,.txt" class="hidden"
+    <label for="input-gallery" class="sr-only">Galleria</label>
+    <input type="file" id="input-gallery" name="input-gallery" accept="image/*,video/*" class="hidden"
+        aria-label="Upload da Galleria">
+    <label for="input-file" class="sr-only">Documento</label>
+    <input type="file" id="input-file" name="input-file" accept=".pdf,.doc,.docx,.xls,.xlsx,.txt" class="hidden"
         aria-label="Upload Documento">
 
     <!-- Source Selector Modal -->
     <div id="source-selector-modal" class="modal-overlay">
         <div class="modal-box-source">
-            <h3 class="detail-section-title modal-source-title">Seleziona Sorgente</h3>
+            <h3 class="detail-section-title modal-source-title" data-t="select_source">Seleziona Sorgente</h3>
 
             <div class="source-grid">
-                <button class="btn-source-option" data-source="camera">
+                <button type="button" id="btn-source-camera" class="btn-source-option" data-source="camera">
                     <span class="material-symbols-outlined icon-accent-blue">photo_camera</span>
-                    <p>Camera</p>
+                    <p data-t="camera">Camera</p>
                 </button>
 
-                <button class="btn-source-option" data-source="gallery">
+                <button type="button" id="btn-source-gallery" class="btn-source-option" data-source="gallery">
                     <span class="material-symbols-outlined icon-accent-purple">collections</span>
-                    <p>Galleria</p>
+                    <p data-t="gallery">Galleria</p>
                 </button>
 
-                <button class="btn-source-option col-span-2" data-source="file">
+                <button type="button" id="btn-source-file" class="btn-source-option col-span-2" data-source="file">
                     <span class="material-symbols-outlined icon-accent-amber">description</span>
-                    <p>Documento</p>
+                    <p data-t="document">Documento</p>
                 </button>
             </div>
 
             <div class="modal-separator">
-                <button type="button" id="btn-cancel-source" class="detail-section-title btn-text-cancel">
+                <button type="button" id="btn-cancel-source" class="detail-section-title btn-text-cancel"
+                    data-t="cancel">
                     Annulla
                 </button>
             </div>
diff --git a/Frontend/public/registrati.html b/Frontend/public/registrati.html
index f87bedb..ac9d2b8 100644
--- a/Frontend/public/registrati.html
+++ b/Frontend/public/registrati.html
@@ -110,6 +110,41 @@
                             required class="input" data-t-placeholder="password_placeholder_reg" placeholder="********">
                     </div>
 
+                    <!-- Preferenze Notifiche (V5.0) -->
+                    <div class="form-group registration-notifications-box">
+                        <p class="label-sm mb-3" data-t="notifications_prefs">Preferenze Notifiche</p>
+
+                        <div class="flex-col-gap-4 bg-white/5 p-4 rounded-2xl border border-white/10">
+                            <!-- Push -->
+                            <div class="flex-between-row">
+                                <div class="flex-col">
+                                    <span class="text-sm font-medium text-white" data-t="pref_push_label">Notifiche Push
+                                        (Device)</span>
+                                    <span class="text-xs opacity-50" data-t="pref_push_desc">Ricevi avvisi sul
+                                        cellulare</span>
+                                </div>
+                                <label class="cursor-pointer">
+                                    <input type="checkbox" id="reg-pref-push" class="base-switch-hidden" checked>
+                                    <div class="base-switch"></div>
+                                </label>
+                            </div>
+
+                            <!-- Email -->
+                            <div class="flex-between-row">
+                                <div class="flex-col">
+                                    <span class="text-sm font-medium text-white" data-t="pref_email_label">Notifiche
+                                        Email</span>
+                                    <span class="text-xs opacity-50" data-t="pref_email_desc">Ricevi avvisi via
+                                        posta</span>
+                                </div>
+                                <label class="cursor-pointer">
+                                    <input type="checkbox" id="reg-pref-email" class="base-switch-hidden" checked>
+                                    <div class="base-switch"></div>
+                                </label>
+                            </div>
+                        </div>
+                    </div>
+
                     <!-- Submit Button -->
                     <button type="submit" id="register-submit-btn" class="btn-primary" data-t="create_account_btn">
                         <span class="material-symbols-outlined">person_add_alt</span>
diff --git a/functions/index.js b/functions/index.js
index 8914ec7..0e2dc45 100644
--- a/functions/index.js
+++ b/functions/index.js
@@ -13,48 +13,29 @@ const { getParams } = require("firebase-functions/params");
 admin.initializeApp();
 setGlobalOptions({ maxInstances: 10, region: "europe-west1" });
 
-// Recupero parametri da Firebase Params//
-//const clientEmail = getParams().gmail.client_email.value();//
+// Recupero parametri da Firebase Params (OAuth disabilitato per App Password)
+//const clientEmail = getParams().gmail.client_email.value();
 const clientEmail = "gmail-sender@halogen-acumen-473312-f4.iam.gserviceaccount.com";
 
-//const privateKey = getParams().gmail.private_key.value().replace(/\\n/g, '\n');//
-
-const privateKey = `-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDP+7cWpJ6eaVrB\nFn2ZVQ4n2GpEzRtUOX1k31zyN3B1klIXhxe8T5oNWZ+vBiUIZ0mt51LjslhnTyP4\n9cTh10I/drCVzE8vELfIBKbpCkKC1GjVP8Rad8Ln/hZ0nDY/ktAZKqiZ34qiQU1V\nrcIVU81MHMhj2MWwhkKROq1vCpIonjcnEKfslWov7fwBsBmFDqgapTvDRGaTz3/M\nq5Xs3GEFAyfdcUCcPdTfwT9L08obogr7R21ibMS9Pdo9uqGLgOqhQVUa/J7K/97w\nGI2xdoAkc5Xc1mfVgjDb+V/DYFRxQUvALCFdbWV/xN02uky11HgobcyKKIJ7pFUJ\ngR0zx8slAgMBAAECggEAAvkTv0/pfiIxzE8uytS1N+SXQElReeOIfO4+CeHsMM7Z\nCMHczDHnGQgnvC/xf5LaZSrIiIpLSs7BMntw4QZbfN5Zdj3nzXU6Hn9sICpBYSIs\n89kBf+zBhuEFUsCY4rfA7PTEv2funcfvlXXyYq1CYszwIF1AFit7ibZPaSYhiLfg\nbxwGLIyxf8BOFztUnt5bg7JRZWZzgIFr/mqEi5QfTSyRpon3LeX1ePzkrOfqbeba\nHR8eTny5ebjoF+8sh0RZtf0mkjJtgl8Y0z4EyCksgq3cJlEa1S5RRdfJbTsrp3Y5\nWKIGyB78cmpVbWXiicacSPOIc61FYlTKxGGgP+v/gQKBgQD5s4mty3V0uNqcAx5D\nR3FljQef2ptCWdJiOZ3LIU2ryb2xgkfQWBiMs70imnAPRHdIxkaHO+dsXS6NeT8K\nfF90WMXX5TOW9xMnFRF6kVug6FeoGXj6hsORKUQc+jKfsPiOdVAYUaz+qiELErd2\nDoJtYLcSGjXSQAIWq0KDZx1YrQKBgQDVOsfGKRX/nl7zP/wf+CemHka8/zhOtGFS\n9g6DY/grJhnXcnCs3DXZnwSIMqYm/wrWG76YikGVkziPNzzwdkvTNjYI3aDiqcjd\nsV6DxfAO7vIOSeiXGDahLz+gS0+RfYey5H/waUYKMgK+UePP+B0Cz6I7axrXsU+G\naNltbz+zWQKBgQDlssnBDTu0LuQyxg+NtmfTEgPkghV22OfWocfM94rar4+HfiAP\nwSp8LE+dSFIzSTktwe9ZMbr2jVVooRNj0vuALLV6oAZwJkMBHblhddvDTlhsc1o9\no8C9hSd6PJJbIlHTwoj2hhPMhLY22HXZ7QkAEwr1ZRUDnwwMzGg4Np/hVQKBgHmW\nDPhH0U1zBv15zNCF9kXZGckHVxo57Q0bVWdCh+5CyZV6ohlPcD1pWXI4P1oZMBqq\ns2HT5FXgHu47Nzp+mfoT/XfMuMLGwcz4KMbHBX3ebpQLPN97ZRtAD+3dQ7/Ybppp\nhTKXNOL3ZW0U0OxztEc4EnADQMkhSBGClAi82PvxAoGBAPX3E4+KfYeZjAh6jzBZ\nqtJvPUKI5fZLyNhEuCn/8g1eAGk5qkf2gHNVtDi+6uMgI/Wzoeqi2OVdbVbCY+j1\n/EcdLg2onANNxQhZoYtTZYwLMJW5yF1sv4imtf3jzhlwgEinWiNo1QQmOqjib38K\nj9X1ibdne6rvj6XbFFYAZSlA\n-----END PRIVATE KEY-----\n`
-
 // Email account da usare come mittente
-const MAIL_USER = "amministrazione.bmservice@gmail.com";
-
-// JWT client per Gmail API
-const jwtClient = new google.auth.JWT(
-  clientEmail,
-  null,
-  privateKey,
-  ["https://www.googleapis.com/auth/gmail.send"]
-);
-
-// Funzione helper per generare access token valido
-async function getAccessToken() {
-  await jwtClient.authorize();
-  return jwtClient.credentials.access_token;
-}
+const MAIL_USER = "boschettodiego@gmail.com";
+// TODO: INSERISCI LA TUA PASSWORD PER LE APP QUI SOTTO
+const MAIL_APP_PASSWORD = "nhwrwwhfetubfvif";
 
-// Crea transporter Nodemailer con OAuth2
+// Crea transporter Nodemailer con App Password
 async function createTransporter() {
-  const accessToken = await getAccessToken();
-
   return nodemailer.createTransport({
     service: "gmail",
     auth: {
-      type: "OAuth2",
       user: MAIL_USER,
-      accessToken: accessToken
+      pass: MAIL_APP_PASSWORD
     }
   });
 }
 
-// Funzione schedulata per controllare scadenze
-exports.checkDeadlines = onSchedule("0 8 * * *", async () => {
-  const db = admin.firestore();
+const { onRequest } = require("firebase-functions/v2/https");
+
+async function runChecks(db) {
   const now = new Date();
   const todayStr = now.toISOString().split("T")[0];
 
@@ -104,6 +85,17 @@ exports.checkDeadlines = onSchedule("0 8 * * *", async () => {
   } catch (error) {
     console.error("[CRITICAL ERROR]", error);
   }
+}
+
+// Funzione schedulata ordinaria (Cron)
+exports.checkDeadlines = onSchedule("0 8 * * *", async () => {
+  await runChecks(admin.firestore());
+});
+
+// Funzione temporanea HTTP per test immediato ORA
+exports.testScadenzeOra = onRequest(async (req, res) => {
+  await runChecks(admin.firestore());
+  res.send("‚úÖ Test Eseguito! L'avviso per e-mail e notifiche push urgenti √® stato appena processato sui server!");
 });
 
 /**
@@ -126,6 +118,11 @@ async function processNotificationChannel(db, recipientEmail, scadenza, ownerPre
             title: `Scadenza: ${scadenza.type}`,
             body: `Ti ricordiamo ${scadenza.type} in data ${scadenza.dueDate}.`
           },
+          webpush: {
+            fcmOptions: {
+              link: `https://appcodici-password.web.app/dettaglio_scadenza.html?id=${scadenzaId}`
+            }
+          },
           data: { scadenzaId, ownerId: ownerUid, click_action: "FLUTTER_NOTIFICATION_CLICK" }
         };
 
@@ -157,14 +154,26 @@ async function processNotificationChannel(db, recipientEmail, scadenza, ownerPre
 async function sendNotificationEmail(scadenza, recipient) {
   const transporter = await createTransporter();
 
+  // Parsing Allegati
+  const mailAttachments = [];
+  if (scadenza.attachments && Array.isArray(scadenza.attachments)) {
+    scadenza.attachments.forEach(att => {
+      mailAttachments.push({
+        filename: att.name || "allegato_scadenza",
+        path: att.url // Nodemailer scarica automaticamente il file pubblico
+      });
+    });
+  }
+
   const mailOptions = {
-    from: `"BM SERVICE - Protocollo" <${MAIL_USER}>`,
+    from: `"Codex Scadenze" <${MAIL_USER}>`,
     to: recipient,
     subject: `[SCADENZA] ${scadenza.type}`,
     text: `Gentile ${scadenza.name || "Cliente"},\n\nTi ricordiamo la seguente scadenza:\n\n` +
       `Oggetto: ${scadenza.type}\n` +
       `Data Scadenza: ${scadenza.dueDate}\n` +
-      `Note: ${scadenza.notes || "-"}\n\nCordiali saluti,\nBM Service s.r.l.`
+      `Note: ${scadenza.notes || "-"}\n\nCordiali saluti,\nCodex Team.`,
+    attachments: mailAttachments
   };
 
   return transporter.sendMail(mailOptions);
