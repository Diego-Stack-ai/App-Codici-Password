<!DOCTYPE html>
<html lang="it" class="dark">

<head>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com; style-src 'self' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Gestione Allegati - PROTOCOLLO BASE V3.6</title> <!-- PWA / Mobile Capable -->
    <link rel="manifest" href="manifest.json?v=3.6" />
    <link rel="apple-touch-icon" sizes="192x192" href="assets/images/app-icon.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- Fonts -->
    <link rel="stylesheet" href="assets/css/fonts.css"> <!-- Design System Master (PROTOCOLLO BASE V3.6) -->
    <link rel="stylesheet" href="assets/css/operatore.css?v=3.6"> <!-- CORE JS -->
    <script src="assets/js/core.js"></script>
    <script type="module" src="assets/js/ui-core.js"></script>
</head>

<body class="base-bg">
    <div class="base-container relative"> <!-- Ambient Glow -->
        <div class="base-glow"></div> <!-- Automated Header -->
        <header id="header-placeholder" class="base-header"></header>
        <div class="spacer-header"></div> <!-- Main Content -->
        <main class="base-main">
            <div class="detail-content-wrap"> <!-- Hero Header -->
                <div class="hero-profile-header">
                    <div class="detail-avatar"> <span class="material-symbols-outlined text-3xl">attach_file</span>
                    </div>
                    <div class="hero-title-container">
                        <h1 class="hero-title" data-t="attachments_manager">Gestione Allegati</h1>
                        <p id="context-subtitle" class="hero-category-badge" data-t="files_and_docs">Documenti e file
                            multimediali</p>
                    </div>
                </div> <!-- base Search -->
                <div class="px-1">
                    <div class="base-search-container border-glow"> <span
                            class="material-symbols-outlined search-icon">search</span> <input type="text"
                            id="search-input" class="base-search-input" placeholder="Cerca tra i documenti..."
                            data-t="search_placeholder"> </div>
                </div> <!-- Premium Upload Area -->
                <div class="px-1"> <button type="button" id="btn-trigger-upload"
                        class="w-full flex-center-col gap-4 p-8 bg-blue-500/5 rounded-[32px] border-2 border-dashed border-blue-500/20 hover:border-blue-500/40 hover:bg-blue-500/10 transition-all active:scale-[0.98] group">
                        <div class="flex items-center gap-6">
                            <div
                                class="size-12 rounded-2xl bg-black/40 flex-center text-blue-400 border border-blue-500/20 group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined">photo_camera</span> </div>
                            <div
                                class="size-12 rounded-2xl bg-black/40 flex-center text-blue-400 border border-blue-500/20 group-hover:scale-110 transition-transform">
                                <span class="material-symbols-outlined">attach_file</span> </div>
                        </div>
                        <div class="text-center">
                            <p class="text-xs font-black uppercase tracking-widest text-blue-400"
                                data-t="add_attachment">Aggiungi Allegato</p>
                            <p class="text-[9px] text-white/40 font-bold uppercase tracking-tighter mt-1"
                                data-t="upload_desc_detailed">Foto, Doc, PDF (Max 10MB)</p>
                        </div>
                    </button> </div> <!-- Chips Filtro -->
                <div id="filter-chips" class="flex gap-2 overflow-x-auto pb-2 scrollbar-hide px-1"> <button
                        class="chip-btn active" data-filter="all" data-t="all">Tutti</button> <button class="chip-btn"
                        data-filter="pdf">PDF</button> <button class="chip-btn" data-filter="image"
                        data-t="images">Immagini</button> <button class="chip-btn" data-filter="video">Video</button>
                    <button class="chip-btn" data-filter="file" data-t="other">Altro</button> </div>
                <!-- List Section -->
                <div class="flex-col-gap-3">
                    <h3 class="text-[10px] font-black uppercase tracking-widest text-white/40 px-1"
                        data-t="recent_files">File Recenti</h3>
                    <div id="attachments-list" class="flex-col-gap-2"> <!-- Rendered via JS -->
                        <div class="flex-center-col py-12 opacity-20"> <span
                                class="material-symbols-outlined text-4xl animate-pulse">sync</span> </div>
                    </div>
                </div>
            </div>
        </main> <!-- Upload Details Modal -->
        <div id="upload-modal" class="fixed inset-0 flex-center z-[9999] hidden opacity-0 transition-all duration-300">
            <div class="absolute inset-0 bg-black/90 backdrop-blur-xl"></div>
            <div
                class="relative glass-card w-[90%] max-w-[400px] overflow-hidden scale-90 transition-transform duration-300">
                <!-- Modal Header -->
                <div class="p-6 border-b border-white/5 bg-white/5">
                    <h3 class="text-lg font-bold text-white text-center" data-t="document_details">Dettagli Documento
                    </h3>
                    <p class="text-[10px] font-black uppercase tracking-widest text-white/40 text-center mt-1"
                        data-t="classify_file">Classificazione Obbligatoria</p>
                </div> <!-- Modal Body -->
                <div class="p-6 flex-col-gap-4">
                    <div class="glass-field-container"> <label class="view-label" data-t="document_type">Tipo
                            Documento</label> <select id="doc-type"
                            class="w-full bg-transparent text-white text-sm outline-none cursor-pointer py-1">
                            <option value="" disabled selected data-t="select_type">Seleziona...</option>
                            <option value="custom" data-t="create_new_type">+ Crea nuovo tipo</option>
                        </select> <input type="text" id="doc-custom-type"
                            class="hidden w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-sm text-white mt-2"
                            placeholder="Nuovo tipo..."> </div>
                    <div class="glass-field-container"> <label class="view-label" data-t="short_description">Breve
                            Descrizione</label> <input type="text" id="doc-desc" maxlength="40"
                            class="w-full bg-transparent text-white text-sm outline-none py-1"
                            placeholder="Es: Fattura Maggio"> </div>
                </div> <!-- Modal Footer -->
                <div class="p-4 bg-white/5 flex gap-3"> <button id="btn-cancel-upload"
                        class="flex-1 base-btn-secondary py-3" data-t="cancel">Annulla</button> <button
                        id="btn-confirm-upload" class="flex-1 base-btn-primary py-3 flex-center-gap"> <span
                            class="material-symbols-outlined text-sm">cloud_upload</span> <span
                            data-t="save">Salva</span> </button> </div>
            </div>
        </div>
        <div class="spacer-footer"></div>
        <footer id="footer-placeholder" class="base-footer"></footer> <!-- Hidden File Input --> <input type="file"
            id="file-upload" class="hidden" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx,image/*">
    </div> <!-- Scripts -->
    <script type="module" src="assets/js/main.js"></script>
    <script type="module" src="assets/js/gestione_allegati.js"></script>
</body>

</html>


