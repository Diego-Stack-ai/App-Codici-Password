<!DOCTYPE html>
<html lang="it" class="dark">

<head>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://*.firebaseapp.com https://*.googleapis.com; script-src 'self' https://*.firebaseapp.com https://apis.google.com https://www.googletagmanager.com https://www.gstatic.com; style-src 'self' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://www.gstatic.com wss://*.firebaseio.com; frame-src 'self' https://*.firebaseapp.com https://www.gstatic.com;">
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Componi Scadenza - PROTOCOLLO BASE V3.6</title> <!-- PWA / Mobile Capable -->
    <link rel="manifest" href="manifest.json?v=3.6" />
    <link rel="apple-touch-icon" sizes="192x192" href="assets/images/app-icon.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- Fonts -->
    <link rel="stylesheet" href="assets/css/fonts.css"> <!-- Design System Master (PROTOCOLLO BASE V3.6) -->
    <link rel="stylesheet" href="assets/css/operatore.css?v=3.6"> <!-- CORE JS -->
    <script src="assets/js/core.js"></script>
    <script type="module" src="assets/js/ui-core.js"></script>
</head>

<body class="base-bg">
    <div class="base-container relative"> <!-- Ambient Glow -->
        <div class="base-glow"></div> <!-- Automated PROTOCOLLO BASE Header -->
        <header id="header-placeholder" class="base-header"></header>
        <div class="spacer-header"></div> <!-- Main Content -->
        <main class="base-main">
            <div class="detail-content-wrap"> <!-- Hero Section & Mode Switch -->
                <div class="hero-profile-header">
                    <div class="detail-avatar"> <span class="material-symbols-outlined text-3xl">event_upcoming</span>
                    </div>
                    <div class="hero-title-container">
                        <h1 class="hero-title" data-t="compose_deadline">Componi Scadenza</h1>
                        <div class="flex items-center gap-2 mt-2"> <button type="button" id="mode-automezzi"
                                class="glass-btn-sm" data-mode="automezzi" data-t="vehicles">Automezzi</button> <button
                                type="button" id="mode-documenti" class="glass-btn-sm" data-mode="documenti"
                                data-t="documents">Documenti</button> <button type="button" id="mode-generali"
                                class="glass-btn-sm" data-mode="generali" data-t="general">Generali</button> </div>
                    </div>
                </div> <!-- 1. Dettagli Principali -->
                <div class="flex-col-gap-4">
                    <div class="detail-section-header"> <span
                            class="material-symbols-outlined detail-section-icon icon-blue">edit_calendar</span>
                        <h3 class="detail-section-title" data-t="deadline_info">Dati Scadenza</h3>
                    </div>
                    <div class="flex-col-gap-3"> <!-- Intestatario -->
                        <div class="glass-field-container"> <label class="view-label" data-t="holder">Intestatario /
                                Nominativo</label>
                            <div class="glass-field"> <span
                                    class="material-symbols-outlined opacity-50 mr-2">person</span> <input
                                    id="nome_cognome" list="names-list" type="text" autocomplete="off"
                                    placeholder="Mario Rossi" /> <datalist id="names-list"></datalist> </div>
                        </div> <!-- Categoria / Oggetto -->
                        <div class="glass-field-container"> <label class="view-label" data-t="category_object">Categoria
                                / Oggetto Scadenza</label>
                            <div class="glass-field"> <span
                                    class="material-symbols-outlined opacity-50 mr-2">category</span> <select
                                    id="tipo_scadenza" class="glass-select">
                                    <option value="" data-t="select_category">Seleziona categoria...</option>
                                </select> </div>
                        </div> <!-- Veicolo (Dinamico) -->
                        <div id="vehicle_fields_wrapper" class="glass-field-container hidden"> <label class="view-label"
                                data-t="vehicle_extra">Dettaglio Veicolo / Altro</label>
                            <div class="glass-field"> <span class="material-symbols-outlined opacity-50 mr-2"
                                    id="vehicle-icon">directions_car</span> <select id="modello_veicolo"
                                    class="glass-select">
                                    <option value="" data-t="select_detail">Seleziona dettaglio...</option>
                                </select> </div>
                        </div> <!-- Template Email -->
                        <div id="testo_email_wrapper" class="glass-field-container hidden"> <label class="view-label"
                                data-t="email_template">Template Messaggio</label>
                            <div class="glass-field"> <span
                                    class="material-symbols-outlined opacity-50 mr-2">description</span> <select
                                    id="testo_email_select" class="glass-select">
                                    <option value="" data-t="select_template">Seleziona template...</option>
                                </select> </div>
                        </div>
                    </div>
                </div> <!-- 2. Date & Notifiche -->
                <div class="flex-col-gap-4">
                    <div class="detail-section-header"> <span
                            class="material-symbols-outlined detail-section-icon icon-amber">notifications_active</span>
                        <h3 class="detail-section-title" data-t="date_alerts">Pianificazione</h3>
                    </div>
                    <div class="flex-col-gap-3">
                        <div class="form-grid-2"> <!-- Data Scadenza -->
                            <div class="glass-field-container"> <label class="view-label" data-t="expiry_date">Data
                                    Scadenza</label>
                                <div class="glass-field"> <span
                                        class="material-symbols-outlined opacity-50 mr-2">calendar_today</span> <input
                                        id="dueDate" type="date" /> </div>
                            </div> <!-- Anteprima Oggetto -->
                            <div class="glass-field-container"> <label class="view-label"
                                    data-t="email_subject_preview">Anteprima Oggetto</label>
                                <div class="glass-field opacity-60"> <input id="oggetto_email" readonly type="text"
                                        placeholder="Oggetto automatico..." class="italic text-xs" /> </div>
                            </div>
                        </div> <!-- Grid Info Preavviso -->
                        <div class="form-grid-2">
                            <div class="p-4 bg-white/5 rounded-2xl border border-white/5 flex items-center gap-3">
                                <div class="size-10 rounded-xl bg-blue-500/10 flex-center text-blue-500"> <span
                                        class="material-symbols-outlined text-xl">timer</span> </div>
                                <div> <span class="block text-[10px] font-bold text-white/40 uppercase"
                                        data-t="notice_days">GG Preavviso</span> <span id="display_notif_days"
                                        class="text-sm font-bold">14</span> <input id="notif_days_before" type="hidden"
                                        value="14"> </div>
                            </div>
                            <div class="p-4 bg-white/5 rounded-2xl border border-white/5 flex items-center gap-3">
                                <div class="size-10 rounded-xl bg-purple-500/10 flex-center text-purple-500"> <span
                                        class="material-symbols-outlined text-xl">update</span> </div>
                                <div> <span class="block text-[10px] font-bold text-white/40 uppercase"
                                        data-t="frequency_days">GG Frequenza</span> <span id="display_notif_freq"
                                        class="text-sm font-bold">7</span> <input id="notif_frequency" type="hidden"
                                        value="7"> </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- 3. Contatti Notifica -->
                <div class="flex-col-gap-4">
                    <div class="detail-section-header"> <span
                            class="material-symbols-outlined detail-section-icon icon-emerald">alternate_email</span>
                        <h3 class="detail-section-title" data-t="notification_recipients">Destinatari</h3>
                    </div>
                    <div class="flex-col-gap-3"> <!-- Email Primaria -->
                        <div class="glass-field-container"> <label class="view-label" data-t="primary_email">Email
                                Primaria</label>
                            <div class="flex-col-gap-2">
                                <div class="glass-field"> <select id="email_primaria_select" class="glass-select">
                                        <option value="" data-t="select_email">Seleziona...</option>
                                        <option value="manual" data-t="manual_input">Scrivi nuova...</option>
                                    </select> </div> <input id="email_primaria_input" type="email"
                                    class="glass-field hidden h-11 px-4 text-sm"
                                    placeholder="Inserisci email manuale..." />
                            </div>
                        </div> <!-- Email Secondaria -->
                        <div class="glass-field-container"> <label class="view-label" data-t="secondary_email">Email
                                Secondaria (Opz.)</label>
                            <div class="flex-col-gap-2">
                                <div class="glass-field"> <select id="email_secondaria_select" class="glass-select">
                                        <option value="" data-t="select_email">Seleziona...</option>
                                        <option value="manual" data-t="manual_input">Scrivi nuova...</option>
                                    </select> </div> <input id="email_secondaria_input" type="email"
                                    class="glass-field hidden h-11 px-4 text-sm"
                                    placeholder="Inserisci email manuale..." />
                            </div>
                        </div> <!-- WhatsApp toggle premium style -->
                        <div class="p-4 bg-white/5 rounded-2xl border border-white/5 flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="size-10 rounded-xl bg-emerald-500/10 flex-center text-emerald-500"> <span
                                        class="material-symbols-outlined text-xl">chat</span> </div>
                                <div> <span class="block text-sm font-bold" data-t="whatsapp_beta">WhatsApp
                                        (Beta)</span> <span class="block text-[10px] text-white/40 uppercase"
                                        data-t="whatsapp_desc">Notifica automatica</span> </div>
                            </div> <label class="cursor-pointer"> <input type="checkbox" id="whatsapp_enable"
                                    class="base-switch-hidden">
                                <div class="base-switch"></div>
                            </label>
                        </div>
                    </div>
                </div> <!-- 4. Allegati & Note -->
                <div class="flex-col-gap-4">
                    <div class="detail-section-header"> <span
                            class="material-symbols-outlined detail-section-icon opacity-50">attach_file</span>
                        <h3 class="detail-section-title" data-t="attachments_notes">Allegati & Note</h3>
                    </div> <!-- Note -->
                    <div class="glass-field-container"> <label class="view-label" data-t="notes">Note Aggiuntive</label>
                        <div class="note-display-box"> <textarea id="notes" class="form-textarea"
                                placeholder="Dettagli sulla scadenza..."></textarea> </div>
                    </div> <!-- Allegati (Link Gestionale) -->
                    <div id="attachments-section" class="flex-col-gap-3">
                        <div id="attachments-placeholder-new"
                            class="p-6 bg-white/5 rounded-3xl border-2 border-dashed border-white/10 flex-center-col gap-2 opacity-60">
                            <span class="material-symbols-outlined text-3xl">cloud_upload</span>
                            <p class="text-[10px] font-bold uppercase tracking-widest text-center"
                                data-t="save_to_upload">Salva per gestire gli allegati</p>
                        </div>
                        <div id="attachments-link-edit" class="hidden"> <a id="btn-manage-attachments" href="#"
                                class="p-4 bg-blue-500/10 rounded-2xl border border-blue-500/20 flex items-center justify-between hover:bg-blue-500/20 transition-all">
                                <div class="flex items-center gap-3"> <span
                                        class="material-symbols-outlined text-blue-500">folder_open</span>
                                    <div> <span class="block text-sm font-bold text-white"
                                            data-t="manage_files">Gestisci Documenti</span> <span
                                            class="block text-[10px] text-blue-400 uppercase font-black"
                                            data-t="view_upload_files">Vedi o aggiungi file</span> </div>
                                </div> <span class="material-symbols-outlined text-blue-500">chevron_right</span>
                            </a> </div>
                    </div>
                </div>
            </div>
        </main>
        <div class="spacer-footer"></div>
        <footer id="footer-placeholder" class="base-footer"></footer>
    </div> <!-- Scripts -->
    <script type="module" src="assets/js/main.js"></script>
    <script type="module" src="assets/js/modules/scadenze/aggiungi_scadenza.js"></script>
</body>

</html>


